[{"path":"https://nichd-bspc.github.io/carnation/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 carnation authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"load-libraries-airway-dataset","dir":"Articles","previous_headings":"","what":"Load libraries & airway dataset","title":"carnation - airway tutorial","text":"First check load libraries need tutorial. using ‚Äòairway‚Äô dataset. First, load dataset. Next, extract counts matrix metadata. Now let‚Äôs see look like. , mat matrix 64102 rows 8 columns. row corresponds single gene column corresponds single sample. notice, rownames mat contains gene IDs column names sample IDs. cdata contains sample metadata. lot information , notice cell dex columns, using differential expression analysis later.","code":"# install optional packages if not present pkgs_to_check <- c('airway', 'org.Hs.eg.db', 'DEGreport') for(pkg in pkgs_to_check){   setRepositories(ind=c(1,2,3,4,5))   if(!requireNamespace(pkg, quietly=TRUE)){     install.packages(pkg, repos='http://cran.us.r-project.org')   } } library(airway) library(DESeq2) library(dplyr) library(GeneTonic) library(org.Hs.eg.db) data('airway') mat <- assay(airway) cdata <- colData(airway) dim(mat) #> [1] 63677     8 head(mat) #>                 SRR1039508 SRR1039509 SRR1039512 SRR1039513 SRR1039516 #> ENSG00000000003        679        448        873        408       1138 #> ENSG00000000005          0          0          0          0          0 #> ENSG00000000419        467        515        621        365        587 #> ENSG00000000457        260        211        263        164        245 #> ENSG00000000460         60         55         40         35         78 #> ENSG00000000938          0          0          2          0          1 #>                 SRR1039517 SRR1039520 SRR1039521 #> ENSG00000000003       1047        770        572 #> ENSG00000000005          0          0          0 #> ENSG00000000419        799        417        508 #> ENSG00000000457        331        233        229 #> ENSG00000000460         63         76         60 #> ENSG00000000938          0          0          0 cdata #> DataFrame with 8 rows and 9 columns #>            SampleName     cell      dex    albut        Run avgLength #>              <factor> <factor> <factor> <factor>   <factor> <integer> #> SRR1039508 GSM1275862  N61311     untrt    untrt SRR1039508       126 #> SRR1039509 GSM1275863  N61311     trt      untrt SRR1039509       126 #> SRR1039512 GSM1275866  N052611    untrt    untrt SRR1039512       126 #> SRR1039513 GSM1275867  N052611    trt      untrt SRR1039513        87 #> SRR1039516 GSM1275870  N080611    untrt    untrt SRR1039516       120 #> SRR1039517 GSM1275871  N080611    trt      untrt SRR1039517       126 #> SRR1039520 GSM1275874  N061011    untrt    untrt SRR1039520       101 #> SRR1039521 GSM1275875  N061011    trt      untrt SRR1039521        98 #>            Experiment    Sample    BioSample #>              <factor>  <factor>     <factor> #> SRR1039508  SRX384345 SRS508568 SAMN02422669 #> SRR1039509  SRX384346 SRS508567 SAMN02422675 #> SRR1039512  SRX384349 SRS508571 SAMN02422678 #> SRR1039513  SRX384350 SRS508572 SAMN02422670 #> SRR1039516  SRX384353 SRS508575 SAMN02422682 #> SRR1039517  SRX384354 SRS508576 SAMN02422673 #> SRR1039520  SRX384357 SRS508579 SAMN02422683 #> SRR1039521  SRX384358 SRS508580 SAMN02422677"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"get-more-gene-annotation","dir":"Articles","previous_headings":"","what":"Get more gene annotation","title":"carnation - airway tutorial","text":"gene IDs come dataset ENSEMBL human-readable. , next extract gene symbols ENTREZID genes org.Hs.eg.db package. Now, human readable gene names SYMBOL column Entrez IDs ENTREZ column.","code":"keytypes <- list('SYMBOL'='SYMBOL', 'ENTREZID'='ENTREZID')  anno_df <- do.call('cbind',              lapply(keytypes, function(x){                mapIds(org.Hs.eg.db,                  column=x,                  keys=rownames(mat),                  keytype='ENSEMBL')                })              )  # convert to data frame anno_df <- as.data.frame(anno_df) head(anno_df) #>                 SYMBOL ENTREZID #> ENSG00000000003 TSPAN6     7105 #> ENSG00000000005   TNMD    64102 #> ENSG00000000419   DPM1     8813 #> ENSG00000000457  SCYL3    57147 #> ENSG00000000460  FIRRM    55732 #> ENSG00000000938    FGR     2268"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"create-deseqdataset","dir":"Articles","previous_headings":"","what":"Create DESeqDataSet","title":"carnation - airway tutorial","text":"Next, create new DESeqDataSet using mat cdata. Let‚Äôs check make sure everything looks okay: save dds list. also normalize counts data save list.","code":"dds <- DESeqDataSetFromMatrix(mat,                               colData=cdata,                               design=~cell + dex) dds #> class: DESeqDataSet  #> dim: 63677 8  #> metadata(1): version #> assays(1): counts #> rownames(63677): ENSG00000000003 ENSG00000000005 ... ENSG00000273492 #>   ENSG00000273493 #> rowData names(0): #> colnames(8): SRR1039508 SRR1039509 ... SRR1039520 SRR1039521 #> colData names(9): SampleName cell ... Sample BioSample dds_list <- list(main=dds) rld_list <- lapply(dds_list, function(x) varianceStabilizingTransformation(x, blind=TRUE))"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"run-differential-expression-analysis","dir":"Articles","previous_headings":"","what":"Run differential expression analysis","title":"carnation - airway tutorial","text":"Now, object dds ready differential expression (DE) analysis. Since, used design=~cell + dex creating dds, step automatically calculate comparisons. last comparison dex_untrt_vs_trt contains effect dex treatment, comparisons compare different cell lines. Next, extract two results run lfcShrink . cell comparison, choose precomputed results using coef parameter. dex comparison, use contrast specify direction comparison, since want use untrt control. Now, comparisons, contain DE analysis results. example, , save results special nested list carnation use. , res contains actual DE analysis results dds contains name DESeqDataSet used DE analysis. values map dds_list names label description comparison Finally, add SYMBOL ENTREZID columns DE results anno_df data frame.","code":"dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing resultsNames(dds) #> [1] \"Intercept\"               \"cell_N061011_vs_N052611\" #> [3] \"cell_N080611_vs_N052611\" \"cell_N61311_vs_N052611\"  #> [5] \"dex_untrt_vs_trt\" cell_comparison <- lfcShrink(dds,                              coef='cell_N61311_vs_N052611',                              type='normal') dex_comparison <- lfcShrink(dds,                             contrast=c('dex', 'trt', 'untrt'),                             type='normal') head(dex_comparison) #> log2 fold change (MAP): dex trt vs untrt  #> Wald test p-value: dex trt vs untrt  #> DataFrame with 6 rows and 6 columns #>                   baseMean log2FoldChange     lfcSE      stat      pvalue #>                  <numeric>      <numeric> <numeric> <numeric>   <numeric> #> ENSG00000000003 708.602170     -0.3741527 0.0988429 -3.787752 0.000152016 #> ENSG00000000005   0.000000             NA        NA        NA          NA #> ENSG00000000419 520.297901      0.2020620 0.1097395  1.842943 0.065337292 #> ENSG00000000457 237.163037      0.0361672 0.1383377  0.264356 0.791505742 #> ENSG00000000460  57.932633     -0.0844567 0.2498904 -0.307054 0.758801924 #> ENSG00000000938   0.318098     -0.0841390 0.1513343 -0.393793 0.693733530 #>                       padj #>                  <numeric> #> ENSG00000000003 0.00128292 #> ENSG00000000005         NA #> ENSG00000000419 0.19646985 #> ENSG00000000457 0.91141962 #> ENSG00000000460 0.89500478 #> ENSG00000000938         NA res_list <- list(         dex_trt_vs_untrt=list(             res=dex_comparison,             dds='main',             label='dex, treated vs untreated'),         cell_N61311_vs_N052611=list(             res=cell_comparison,             dds='main',             label='cell, N61311 vs N052611')         ) res_list <- lapply(res_list, function(x){               # save the rownames as a new 'gene' column               x$res[[ 'gene' ]] <- rownames(x$res)                # add 'SYMBOL' and 'ENTREZID' columns               x$res[[ 'SYMBOL' ]] <- anno_df[rownames(x$res), 'SYMBOL']               x$res[[ 'ENTREZID' ]] <- anno_df[rownames(x$res), 'ENTREZID']                x             })"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"add-functional-enrichment-results-optional","dir":"Articles","previous_headings":"","what":"Add functional enrichment results (optional)","title":"carnation - airway tutorial","text":"Now run functional enrichment DE genes two comparisons. , first set significance thresholds extract DE genes save list. Next, run functional enrichment save results list called enrich_list. also save converted list called genetonic carnation uses several plots GeneTonic package. Since, time-consuming step, use pre-computed enrichment results included carnation. enrich_list nested list : top-level names unique keys/identifiers second level corresponds direction change, e.g.¬†, changed. level also contains special entry res maps res_list names, way record DE results came . third level corresponds ontology, e.g.¬†BP (GO Biological Process). , just using changed genes GO Biological Process (BP) ontology, enrich_list looks like: genetonic mirrors structure.","code":"# padj cutoff alpha <- 0.01  # log2FoldChange threshold; 1 == 2x difference lfc_threshold <- 1  # list to save DE genes de.genes <- lapply(res_list, function(x){               # changed genes               idx <- x$res$padj < alpha &                      !is.na(x$res$padj) &                      abs(x$res$log2FoldChange) >= lfc_threshold                # return DE genes as a dataframe               x$res[idx, c('gene', 'ENTREZID')]             }) # fe results from dex comparison data(eres_dex, package='carnation')  # fe results from dex comparison data(eres_cell, package='carnation')  # compile into a list go_list <- list(dex_trt_vs_untrt=eres_dex, cell_N61311_vs_N052611=eres_cell)  # list to save functional enrichment results enrich_list <- list()  # list to save a converted object for GeneTonic plots genetonic <- list()  for(comp in names(res_list)){     # NOTE: this is the command used to generate the functional     # enrichment results     #go.res <- clusterProfiler::enrichGO(     #        gene=de.genes[[comp]][['ENTREZID']],     #        keyType='ENTREZID',     #        OrgDb=org.Hs.eg.db,     #        ont='BP',     #        pvalueCutoff=1, qvalueCutoff=1,     #        readable = TRUE)      # we use the precomputed results here instead     go.res <- go_list[[ comp ]]      enrich_list[[ comp ]] <- list(                                res=comp,                                changed=list( BP=as.data.frame(go.res) )                              )      genetonic[[ comp ]] <- list(                              res=comp,                              changed=list(                                BP=carnation::enrich_to_genetonic(go.res, res_list[[comp]]$res)                              )                            )  } #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic... #> Found 3706 gene sets in `enrichResult` object, of which 3706 are significant. #> Converting for usage in GeneTonic... enrich_list   ‚îú‚îÄ dex_trt_vs_untrt   ‚îÇ    ‚îú‚îÄ res = 'des_trt_vs_untrt'    <--- comparison used to get FE results   ‚îÇ    ‚îî‚îÄ changed   ‚îÇ         ‚îî‚îÄ BP                     <--- functional enrichment results   ‚îÇ   ‚îî‚îÄ cell_N61311_vs_N052611        ‚îú‚îÄ res = 'cell_N61311_vs_N052611'    <--- comparison used to get FE results        ‚îî‚îÄ changed             ‚îî‚îÄ BP                           <--- functional enrichment results"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"add-pattern-analysis-optional","dir":"Articles","previous_headings":"","what":"Add pattern analysis (optional)","title":"carnation - airway tutorial","text":"Finally, add pattern analysis dex_trt_vs_untrt comparison using DEGreport package. First, extract normalized data 755 DE genes comparison. , run pattern analysis, using cell time variable dex color variable. , since time-consuming step, use pre-computed pattern analysis results included carnation. Next, extract normalized slot object save list.","code":"# extract normalized data & metadata ma <- assay(rld_list[['main']]) colData.i <- colData(rld_list[['main']])  # only keep data from DE genes idx <- rownames(ma) %in% de.genes[['dex_trt_vs_untrt']][['gene']] ma.i <- ma[idx,]  # remove any genes with 0 variance ma.i <- ma.i[rowVars(ma.i) != 0, ] # NOTE: This is the command used to perform pattern analysis # degpatterns_dex <- DEGreport::degPatterns( #                      ma.i, #                      colData.i, # #                      time='cell', #                      col='dex', # #                      # NOTE: reduce and merge cutoff---------------------------------------- #                      #   Reduce will merge clusters that are similar; similarity determined #                      #   by cutoff #                      reduce=TRUE, # #                      plot=FALSE #                    )  # We use the pre-computed results here instead data(degpatterns_dex, package='carnation') # extract normalized slot and add symbol column p_norm <- degpatterns_dex$normalized p_norm[[ 'SYMBOL' ]] <- anno_df[p_norm[['genes']], 'SYMBOL']  # save pattern analysis results degpatterns <- list(dex_by_cell=p_norm)"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"compose-carnation-object","dir":"Articles","previous_headings":"","what":"Compose carnation object","title":"carnation - airway tutorial","text":"Now pieces build carnation object.","code":"combined <- list(res_list=res_list,                  dds_list=dds_list,                  rld_list=rld_list,                  enrich_list=enrich_list,                  genetonic=genetonic,                  degpatterns_list=degpatterns) saveRDS(combined, 'carnation_vignette.rds', compress=FALSE)"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"data-organization","dir":"Articles","previous_headings":"","what":"Data Organization","title":"carnation - airway tutorial","text":"Organize data directory structure Carnation can easily navigate, e.g.¬†folder carnation/data home directory. , make subfolder airway folder copy RDS file created . Now, ‚Äôre ready first run.","code":"~/carnation/data/   ‚îî‚îÄ airway      ‚îî‚îÄ carnation-vignette.rds"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"first-run","dir":"Articles","previous_headings":"","what":"First Run","title":"carnation - airway tutorial","text":"Load carnation package. Carnation allows download interactive plots PDF. use functionality need install required Python dependencies: Now, run app: run fixed port, e.g.¬†using remote servers SSH port forwarding, specify port within list options. access Carnation opening URL: http://127.0.0.1:12345","code":"library(carnation) #>  #> Attaching package: 'carnation' #> The following object is masked from 'package:GeneTonic': #>  #>     gs_radar install_carnation()  # Installs plotly and kaleido for PDF export run_carnation() run_carnation(options=list(port=12345, launch.browser=FALSE))"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"initial-setup","dir":"Articles","previous_headings":"First Run","what":"Initial setup","title":"carnation - airway tutorial","text":"first time run carnation, asked specify data located modal dialog. Enter folder saved RDS file, ~/carnation/data, click ‚ÄòOK‚Äô.  Now carnation automatically refresh see data/airway ‚ÄúAvailable Projects‚Äù menu, carnation_vignette ‚ÄúAvailable Datasets‚Äù. Since dataset , options automatically selected. Now click ‚ÄòGo‚Äô load data.  Now carnation load airway data switch ‚ÄúSummary‚Äù tab.","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"general-layout","dir":"Articles","previous_headings":"First Run","what":"General layout","title":"carnation - airway tutorial","text":"interface Carnation consists main central panel content, sidebar containing settings ‚ÄòGene scratchpad‚Äô buttons context-specific help buttons.","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"feature-overview","dir":"Articles","previous_headings":"","what":"Feature overview","title":"carnation - airway tutorial","text":"Carnation organized three major sections set subtabs organize different portions RNA-Seq analysis.","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"de-analysis","dir":"Articles","previous_headings":"Feature overview","what":"DE analysis","title":"carnation - airway tutorial","text":"can analyze differential expression different tables visualizations: Summary: Get quick overview differential expression results  Metadata: Explore sample metadata experimental design. can also add metadata columns.  PCA Plot: Visualize sample relationships PCA plot.  can also view plot 3D  gene loadings overlaid.  MA Plot: Identify differentially expressed genes statistical significance  Scatter Plot: Compare fold-changes genes across different comparisons  Gene Plot: Create customizable expression visualizations genes interest  UpSet Plot: Discover overlapping gene sets across multiple comparisons  Heatmap: Examine expression patterns across samples conditions","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"functional-enrichment","dir":"Articles","previous_headings":"Feature overview","what":"Functional enrichment","title":"carnation - airway tutorial","text":"Explore functional enrichment analysis results using module: Table: Interactive tables powerful search capabilities  Plots: Seven different visualizations including network plots dendrograms GeneTonic clusterProfiler packages: Summary overview view top enriched terms Three flavors enrichment map including one similar terms grouped together Cnetplot: network plot highlighting genes connecting functional terms Radar plot: top enriched terms shown circular view Alluvial plot: flow diagram highlighting genes connecting functional terms Dendrogram: hierarchical tree view top enriched terms Compare Results: Directly compare enrichment results conditions using three different visualizations. Summary overview comparing contrasts Radar plot two comparisons  Horizon plot top terms connected comparison","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"pattern-analysis","dir":"Articles","previous_headings":"Feature overview","what":"Pattern analysis","title":"carnation - airway tutorial","text":"Identify co-regulated gene clusters across conditions Plot: Visualize expression patterns gene clusters  Cluster Membership: Explore genes belong clusters using interactive table","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"gene-scratchpad","dir":"Articles","previous_headings":"Feature overview","what":"Gene scratchpad","title":"carnation - airway tutorial","text":"can keep track genes interest across Carnation using gene scratchpad. use feature, click ‚ÄúGene scratchpad‚Äù button sidebar. start can add top differentially expressed genes specific comparison using ‚ÄúTop genes settings‚Äù clicking ‚ÄúAdd top genes‚Äù.  Now several plots ‚ÄúDE analysis‚Äù section genes labeled, e.g. MA plot, scatter plot, others. Labeled MA plot  Labeled scatter plot  genes can also used label pattern analysis plot. Set ‚Äúlabel‚Äù ‚Äúgene_scratchpad‚Äù click ‚ÄúRefresh plot‚Äù.  Now genes labeled plot. also see table summarizing clusters genes found.  can also quickly add genes scratchpad functional enrichment tables First, select term interest enrichment table  , click ‚ÄòAdd scratchpad‚Äô button bottom page.  Now, genes added scratchpad can used label plots shown .","code":""},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"server-mode","dir":"Articles","previous_headings":"Feature overview","what":"Server Mode","title":"carnation - airway tutorial","text":"Carnation supports multi-user environments authentication: Now run carnation authentication","code":"# Create user database credentials <- data.frame(   user = c('shinymanager'),   password = c('12345'),   admin = c(TRUE),   stringsAsFactors = FALSE )  # Initialize the database shinymanager::create_db(   credentials_data = credentials,   sqlite_path = 'credentials.sqlite',   passphrase = 'admin_passphrase' ) run_carnation(credentials='credentials.sqlite', passphrase='admin_passphrase')"},{"path":"https://nichd-bspc.github.io/carnation/articles/carnation.html","id":"sessioninfo","dir":"Articles","previous_headings":"","what":"sessionInfo","title":"carnation - airway tutorial","text":"","code":"sessionInfo() #> R version 4.4.3 (2025-02-28) #> Platform: x86_64-conda-linux-gnu #> Running under: Ubuntu 24.04.3 LTS #>  #> Matrix products: default #> BLAS/LAPACK: /home/runner/work/carnation/env/lib/libopenblasp-r0.3.30.so;  LAPACK version 3.12.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: Etc/UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] carnation_0.99.6            org.Hs.eg.db_3.20.0         #>  [3] AnnotationDbi_1.68.0        GeneTonic_3.0.0             #>  [5] dplyr_1.1.4                 DESeq2_1.46.0               #>  [7] airway_1.26.0               SummarizedExperiment_1.36.0 #>  [9] Biobase_2.66.0              GenomicRanges_1.58.0        #> [11] GenomeInfoDb_1.42.0         IRanges_2.40.0              #> [13] S4Vectors_0.44.0            BiocGenerics_0.52.0         #> [15] MatrixGenerics_1.18.0       matrixStats_1.5.0           #>  #> loaded via a namespace (and not attached): #>   [1] fs_1.6.6                    bitops_1.0-9                #>   [3] enrichplot_1.26.1           httr_1.4.7                  #>   [5] webshot_0.5.5               RColorBrewer_1.1-3          #>   [7] doParallel_1.0.17           dynamicTreeCut_1.63-1       #>   [9] backports_1.5.0             tippy_0.1.0                 #>  [11] tools_4.4.3                 R6_2.6.1                    #>  [13] DT_0.34.0                   lazyeval_0.2.2              #>  [15] mgcv_1.9-4                  GetoptLong_1.1.0            #>  [17] withr_3.0.2                 prettyunits_1.2.0           #>  [19] gridExtra_2.3               cli_3.6.5                   #>  [21] textshaping_1.0.4           logging_0.10-108            #>  [23] TSP_1.2.6                   sass_0.4.10                 #>  [25] topGO_2.58.0                bs4Dash_2.3.5               #>  [27] askpass_1.2.1               ggridges_0.5.7              #>  [29] goseq_1.58.0                pkgdown_2.2.0               #>  [31] Rsamtools_2.22.0            systemfonts_1.3.1           #>  [33] yulab.utils_0.2.3           gson_0.1.0                  #>  [35] txdbmaker_1.2.0             DOSE_4.0.0                  #>  [37] R.utils_2.13.0              limma_3.62.1                #>  [39] RSQLite_2.4.5               visNetwork_2.1.4            #>  [41] generics_0.1.4              gridGraphics_0.5-1          #>  [43] shape_1.4.6.1               BiocIO_1.16.0               #>  [45] dendextend_1.19.1           GO.db_3.20.0                #>  [47] Matrix_1.7-4                abind_1.4-8                 #>  [49] R.methodsS3_1.8.2           lifecycle_1.0.4             #>  [51] edgeR_4.4.0                 yaml_2.3.12                 #>  [53] qvalue_2.38.0               SparseArray_1.6.0           #>  [55] BiocFileCache_2.14.0        grid_4.4.3                  #>  [57] blob_1.2.4                  promises_1.5.0              #>  [59] crayon_1.5.3                miniUI_0.1.2                #>  [61] ggtangle_0.0.9              lattice_0.22-7              #>  [63] billboarder_0.5.0           ComplexUpset_1.3.3          #>  [65] cowplot_1.2.0               GenomicFeatures_1.58.0      #>  [67] KEGGREST_1.46.0             pillar_1.11.1               #>  [69] knitr_1.51                  ComplexHeatmap_2.22.0       #>  [71] fgsea_1.32.2                rjson_0.2.23                #>  [73] codetools_0.2-20            fastmatch_1.1-6             #>  [75] glue_1.8.0                  ggfun_0.2.0                 #>  [77] data.table_1.17.8           vctrs_0.6.5                 #>  [79] png_0.1-8                   treeio_1.30.0               #>  [81] gtable_0.3.6                assertthat_0.2.1            #>  [83] cachem_1.1.0                xfun_0.55                   #>  [85] S4Arrays_1.6.0              mime_0.13                   #>  [87] ConsensusClusterPlus_1.70.0 seriation_1.5.8             #>  [89] shinythemes_1.2.0           iterators_1.0.14            #>  [91] statmod_1.5.1               nlme_3.1-168                #>  [93] ggtree_3.14.0               bit64_4.6.0-1               #>  [95] progress_1.2.3              filelock_1.0.3              #>  [97] rprojroot_2.1.1             bslib_0.9.0                 #>  [99] otel_0.2.0                  colorspace_2.1-2            #> [101] DBI_1.2.3                   mnormt_2.1.1                #> [103] tidyselect_1.2.1            bit_4.6.0                   #> [105] compiler_4.4.3              curl_7.0.0                  #> [107] httr2_1.2.2                 graph_1.84.0                #> [109] BiasedUrn_2.0.12            SparseM_1.84-2              #> [111] expm_1.0-0                  xml2_1.5.1                  #> [113] ggdendro_0.2.0              desc_1.4.3                  #> [115] DelayedArray_0.32.0         plotly_4.11.0               #> [117] scrypt_0.1.6                colourpicker_1.3.0          #> [119] rtracklayer_1.66.0          scales_1.4.0                #> [121] psych_2.5.6                 mosdef_1.2.0                #> [123] rappdirs_0.3.3              stringr_1.6.0               #> [125] digest_0.6.39               shinyBS_0.63.0              #> [127] rmarkdown_2.30              ca_0.71.1                   #> [129] XVector_0.46.0              htmltools_0.5.9             #> [131] pkgconfig_2.0.3             learnr_0.11.6               #> [133] dbplyr_2.5.1                fastmap_1.2.0               #> [135] rlang_1.1.6                 GlobalOptions_0.1.3         #> [137] htmlwidgets_1.6.4           UCSC.utils_1.2.0            #> [139] shiny_1.12.1                shinymanager_1.0.410        #> [141] farver_2.1.2                jquerylib_0.1.4             #> [143] jsonlite_2.0.0              BiocParallel_1.40.0         #> [145] GOSemSim_2.32.0             R.oo_1.27.1                 #> [147] RCurl_1.98-1.17             magrittr_2.0.4              #> [149] GenomeInfoDbData_1.2.13     ggplotify_0.1.3             #> [151] patchwork_1.3.2             Rcpp_1.1.0                  #> [153] reticulate_1.44.1           ape_5.8-1                   #> [155] shinycssloaders_1.1.0       viridis_0.6.5               #> [157] stringi_1.8.7               rintrojs_0.3.4              #> [159] zlibbioc_1.52.0             MASS_7.3-65                 #> [161] DEGreport_1.42.0            plyr_1.8.9                  #> [163] parallel_4.4.3              ggrepel_0.9.6               #> [165] Biostrings_2.74.0           splines_4.4.3               #> [167] hms_1.1.4                   geneLenDataBase_1.42.0      #> [169] circlize_0.4.17             locfit_1.5-9.12             #> [171] igraph_2.1.4                reshape2_1.4.5              #> [173] biomaRt_2.62.0              XML_3.99-0.20               #> [175] evaluate_1.0.5              foreach_1.5.2               #> [177] tweenr_2.0.3                httpuv_1.6.16               #> [179] backbone_2.1.5              openssl_2.3.4               #> [181] tidyr_1.3.2                 purrr_1.2.0                 #> [183] polyclip_1.10-7             reshape_0.8.10              #> [185] heatmaply_1.6.0             clue_0.3-66                 #> [187] ggplot2_3.5.2               ggforce_0.5.0               #> [189] broom_1.0.11                xtable_1.8-4                #> [191] restfulr_0.0.16             tidytree_0.4.6              #> [193] later_1.4.4                 viridisLite_0.4.2           #> [195] ragg_1.5.0                  tibble_3.3.0                #> [197] clusterProfiler_4.14.0      aplot_0.2.9                 #> [199] registry_0.5-1              memoise_2.0.1               #> [201] GenomicAlignments_1.42.0    cluster_2.1.8.1             #> [203] sortable_0.5.0              shinyWidgets_0.9.0          #> [205] shinyAce_0.4.4"},{"path":"https://nichd-bspc.github.io/carnation/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Apratim Mitra. Author, maintainer.","code":""},{"path":"https://nichd-bspc.github.io/carnation/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Mitra (2026). carnation: Shiny App Explore RNA-Seq Analysis. R package version 0.99.6, https://nichd-bspc.github.io/carnation/.","code":"@Manual{,   title = {carnation: Shiny App to Explore RNA-Seq Analysis},   author = {Apratim Mitra},   year = {2026},   note = {R package version 0.99.6},   url = {https://nichd-bspc.github.io/carnation/}, }"},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"carnation","dir":"","previous_headings":"","what":"Shiny App to Explore RNA-Seq Analysis","title":"Shiny App to Explore RNA-Seq Analysis","text":"Deeply explore bulk RNA-Seq data interactive visualizations Carnation interactive Shiny dashboard transforms complex bulk RNA-Seq data beautiful, insightful visualizations. Designed computational experimental biologists, Carnation makes exploring differential expression analysis, functional enrichment, pattern analysis intuitive exciting.","code":""},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"sparkles-key-features","dir":"","previous_headings":"","what":"‚ú® Key Features","title":"Shiny App to Explore RNA-Seq Analysis","text":"üìä PCA plots - Visualize sample relationships gene loadings overlay üî• Heatmaps - Examine expression patterns across samples conditions üìà MA plots - Identify differentially expressed genes üß© UpSet plots - Discover overlapping gene sets across comparisons üìâ Gene plots - Create customizable expression visualizations üåê Network plots - Visualize gene-term relationships üìä Summary overviews - Compare enrichment across conditions üîç Fuzzy search - Find relevant pathways across genes descriptions Pattern Analysis: Identify co-regulated gene clusters across conditions Gene Tracking: Keep genes interest fingertips ‚ÄúGene scratchpad‚Äù Flexible Deployment: Run locally personal analysis server share collaborators User Management: Optional authentication system controlled access multi-user environments","code":""},{"path":[]},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"conda-recommended","dir":"","previous_headings":"üöÄ Installation","what":"conda (recommended)","title":"Shiny App to Explore RNA-Seq Analysis","text":"easiest way get started Carnation conda, handles dependencies automatically: install package remotes package. Note, set upgrade='never' make sure conda-installed package versions remain unchanged.","code":"# Create environment outside the carnation directory cd .. && conda env create -p env --file carnation/requirements-pinned.yaml conda activate ./env R remotes::install_github('NICHD-BSPC/carnation', upgrade='never')"},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"remotes","dir":"","previous_headings":"üöÄ Installation","what":"remotes","title":"Shiny App to Explore RNA-Seq Analysis","text":"Alternatively, can install directly remotes:","code":"install.packages('remotes') setRepositories(ind=c(1,2,3,4,5))  # Get both CRAN and Bioconductor packages remotes::install_github('NICHD-BSPC/carnation')"},{"path":[]},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"data-organization","dir":"","previous_headings":"üèÅ Getting Started","what":"Data Organization","title":"Shiny App to Explore RNA-Seq Analysis","text":"Organize data directory structure Carnation can easily navigate:","code":"/carnation/data/   ‚îú‚îÄ project1   ‚îÇ  ‚îú‚îÄ main.rds   ‚îÇ  ‚îú‚îÄ subset.rds   ‚îÇ  ‚îî‚îÄ main-nooutlier.rds   ‚îÇ   ‚îî‚îÄ project2      ‚îî‚îÄ default.rds"},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"first-run","dir":"","previous_headings":"üèÅ Getting Started","what":"First Run","title":"Shiny App to Explore RNA-Seq Analysis","text":"Load library install required Python dependencies: remote servers SSH port forwarding: access Carnation http://127.0.0.1:12345","code":"library(carnation) install_carnation()  # Installs plotly and kaleido for PDF export run_carnation() run_carnation(options=list(port=12345, launch.browser=FALSE))"},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"mag-exploring-your-data","dir":"","previous_headings":"","what":"üîç Exploring Your Data","title":"Shiny App to Explore RNA-Seq Analysis","text":"data loaded, Carnation offers multiple ways explore: Summary: Get quick overview differential expression results Metadata: Explore sample metadata experimental design PCA Plot: Visualize sample relationships gene loadings overlay MA Plot: Identify differentially expressed genes statistical significance Gene Plot: Create customizable expression visualizations genes interest UpSet Plot: Discover overlapping gene sets across multiple comparisons Heatmap: Examine expression patterns across samples conditions Table: Interactive tables powerful search capabilities Plots: Seven different visualizations including network plots dendrograms Compare Results: Directly compare enrichment results conditions Plot: Visualize expression patterns gene clusters Cluster Membership: Explore genes belong clusters Gene Scratchpad: Track genes interest across visualizations","code":""},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"books-documentation","dir":"","previous_headings":"","what":"üìö Documentation","title":"Shiny App to Explore RNA-Seq Analysis","text":"module includes comprehensive help documentation accessible help buttons throughout interface. documentation provides detailed explanations plot options, statistical methods, interpretation guidelines.","code":""},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"handshake-contributing","dir":"","previous_headings":"","what":"ü§ù Contributing","title":"Shiny App to Explore RNA-Seq Analysis","text":"welcome contributions Carnation! Please feel free submit issues pull requests GitHub repository.","code":""},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"page_facing_up-license","dir":"","previous_headings":"","what":"üìÑ License","title":"Shiny App to Explore RNA-Seq Analysis","text":"Carnation available MIT license.","code":""},{"path":"https://nichd-bspc.github.io/carnation/index.html","id":"computer-server-mode","dir":"","previous_headings":"","what":"üíª Server Mode","title":"Shiny App to Explore RNA-Seq Analysis","text":"Carnation supports multi-user environments authentication:","code":"# Create user database credentials <- data.frame(   user = c('shinymanager'),   password = c('12345'),   admin = c(TRUE),   stringsAsFactors = FALSE )  # Initialize the database shinymanager::create_db(   credentials_data = credentials,   sqlite_path = 'credentials.sqlite',   passphrase = 'admin_passphrase' )  # Run with authentication run_carnation(credentials='credentials.sqlite', passphrase='admin_passphrase')"},{"path":"https://nichd-bspc.github.io/carnation/reference/add.set.column.html","id":null,"dir":"Reference","previous_headings":"","what":"Add set column to UpSet plot matrix ‚Äî add.set.column","title":"Add set column to UpSet plot matrix ‚Äî add.set.column","text":"function adds column denoting set number matrix generated upset plot fromList..names()","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add.set.column.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add set column to UpSet plot matrix ‚Äî add.set.column","text":"","code":"add.set.column(df)"},{"path":"https://nichd-bspc.github.io/carnation/reference/add.set.column.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add set column to UpSet plot matrix ‚Äî add.set.column","text":"df binary matrix row = genes & columns gene sets, 1 indicating gene present gene set vice-versa","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add.set.column.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add set column to UpSet plot matrix ‚Äî add.set.column","text":"data.frame added set column","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add.set.column.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add set column to UpSet plot matrix ‚Äî add.set.column","text":"","code":"# list of genes lst <- list(group1 = c(a = \"gene1\", b = \"gene2\", c = \"gene3\", d = \"gene4\"),             group2 = c(c = \"gene3\", d = \"gene4\"))  # binarized matrix with group membership df <- fromList.with.names(lst)  # matrix with added set column ldf <- add.set.column(df)"},{"path":"https://nichd-bspc.github.io/carnation/reference/add_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Add metadata to counts data frame ‚Äî add_metadata","title":"Add metadata to counts data frame ‚Äî add_metadata","text":"Add metadata counts data frame","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add metadata to counts data frame ‚Äî add_metadata","text":"","code":"add_metadata(df, coldata, exclude.intgroups)"},{"path":"https://nichd-bspc.github.io/carnation/reference/add_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add metadata to counts data frame ‚Äî add_metadata","text":"df data.frame gene counts coldata data.frame metadata exclude.intgroups metadata columns ignore","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add metadata to counts data frame ‚Äî add_metadata","text":"counts data frame added metadata","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/add_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add metadata to counts data frame ‚Äî add_metadata","text":"","code":"library(DESeq2) #> Loading required package: S4Vectors #> Loading required package: stats4 #> Loading required package: BiocGenerics #>  #> Attaching package: ‚ÄòBiocGenerics‚Äô #> The following objects are masked from ‚Äòpackage:stats‚Äô: #>  #>     IQR, mad, sd, var, xtabs #> The following objects are masked from ‚Äòpackage:base‚Äô: #>  #>     Filter, Find, Map, Position, Reduce, anyDuplicated, aperm, append, #>     as.data.frame, basename, cbind, colnames, dirname, do.call, #>     duplicated, eval, evalq, get, grep, grepl, intersect, is.unsorted, #>     lapply, mapply, match, mget, order, paste, pmax, pmax.int, pmin, #>     pmin.int, rank, rbind, rownames, sapply, saveRDS, setdiff, table, #>     tapply, union, unique, unsplit, which.max, which.min #>  #> Attaching package: ‚ÄòS4Vectors‚Äô #> The following object is masked from ‚Äòpackage:utils‚Äô: #>  #>     findMatches #> The following objects are masked from ‚Äòpackage:base‚Äô: #>  #>     I, expand.grid, unname #> Loading required package: IRanges #> Loading required package: GenomicRanges #> Loading required package: GenomeInfoDb #> Loading required package: SummarizedExperiment #> Loading required package: MatrixGenerics #> Loading required package: matrixStats #>  #> Attaching package: ‚ÄòMatrixGenerics‚Äô #> The following objects are masked from ‚Äòpackage:matrixStats‚Äô: #>  #>     colAlls, colAnyNAs, colAnys, colAvgsPerRowSet, colCollapse, #>     colCounts, colCummaxs, colCummins, colCumprods, colCumsums, #>     colDiffs, colIQRDiffs, colIQRs, colLogSumExps, colMadDiffs, #>     colMads, colMaxs, colMeans2, colMedians, colMins, colOrderStats, #>     colProds, colQuantiles, colRanges, colRanks, colSdDiffs, colSds, #>     colSums2, colTabulates, colVarDiffs, colVars, colWeightedMads, #>     colWeightedMeans, colWeightedMedians, colWeightedSds, #>     colWeightedVars, rowAlls, rowAnyNAs, rowAnys, rowAvgsPerColSet, #>     rowCollapse, rowCounts, rowCummaxs, rowCummins, rowCumprods, #>     rowCumsums, rowDiffs, rowIQRDiffs, rowIQRs, rowLogSumExps, #>     rowMadDiffs, rowMads, rowMaxs, rowMeans2, rowMedians, rowMins, #>     rowOrderStats, rowProds, rowQuantiles, rowRanges, rowRanks, #>     rowSdDiffs, rowSds, rowSums2, rowTabulates, rowVarDiffs, rowVars, #>     rowWeightedMads, rowWeightedMeans, rowWeightedMedians, #>     rowWeightedSds, rowWeightedVars #> Loading required package: Biobase #> Welcome to Bioconductor #>  #>     Vignettes contain introductory material; view with #>     'browseVignettes()'. To cite Bioconductor, see #>     'citation(\"Biobase\")', and for packages 'citation(\"pkgname\")'. #>  #> Attaching package: ‚ÄòBiobase‚Äô #> The following object is masked from ‚Äòpackage:MatrixGenerics‚Äô: #>  #>     rowMedians #> The following objects are masked from ‚Äòpackage:matrixStats‚Äô: #>  #>     anyMissing, rowMedians  # make example DESeq data set dds <- makeExampleDESeqDataSet()  # extract counts and metadata df <- assay(dds) coldata <- colData(dds)  # get gene counts df counts_df <- get_gene_counts(dds, paste0('gene', seq_len(10)))  # add metadata counts_df <- add_metadata(counts_df, coldata, exclude.intgroups=NULL)"},{"path":"https://nichd-bspc.github.io/carnation/reference/alluvialmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Alluvial plot module ‚Äî alluvialmod","title":"Alluvial plot module ‚Äî alluvialmod","text":"UI & module generate alluvial plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/alluvialmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Alluvial plot module ‚Äî alluvialmod","text":"","code":"alluvialUI(id, panel)  alluvialServer(id, obj, res_obj, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/alluvialmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Alluvial plot module ‚Äî alluvialmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing GeneTonic object res_obj reactive, dataframe containing enrichment results config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/alluvialmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Alluvial plot module ‚Äî alluvialmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/alluvialmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Alluvial plot module ‚Äî alluvialmod","text":"","code":"library(shiny)  # get DESeqResults object data(res_dex, package='carnation')  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object  gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(l_gs = gt$l_gs,        anno_df = gt$anno_df,        label = 'comp1') })  res_obj <- reactive({ res })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(alluvialUI('p', 'sidebar')),            mainPanel(alluvialUI('p', 'main'))          ),     server = function(input, output, session){                alluvialServer('p', obj, res_obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":null,"dir":"Reference","previous_headings":"","what":"Get data areas a user has access to ‚Äî check_user_access","title":"Get data areas a user has access to ‚Äî check_user_access","text":"function takes username returns list two elements:","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get data areas a user has access to ‚Äî check_user_access","text":"","code":"check_user_access(al, u, admin = \"admin\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get data areas a user has access to ‚Äî check_user_access","text":"al list access settings; two elements - user_group & data_area u user name admin Admin user group","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get data areas a user has access to ‚Äî check_user_access","text":"list user groups data areas","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get data areas a user has access to ‚Äî check_user_access","text":"user_group: one element vector data_area: vector data areas","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/check_user_access.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get data areas a user has access to ‚Äî check_user_access","text":"","code":"# save access details to file home <- Sys.getenv('HOME')  # create carnation data area if it doesn't exist carnation_home <- file.path(home, 'carnation/data') if(!dir.exists(carnation_home)) dir.create(carnation_home) #> Warning: cannot create dir '/home/runner/carnation/data', reason 'No such file or directory'  create_access_yaml(user = 'admin',                    user_group = 'admin',                    data_area = carnation_home) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  # get current user access details al <- read_access_yaml() #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  lst <- check_user_access(al, u='admin')"},{"path":"https://nichd-bspc.github.io/carnation/reference/cnetmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Cnetplot module ‚Äî cnetmod","title":"Cnetplot module ‚Äî cnetmod","text":"UI & module generate Cnetplots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/cnetmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cnetplot module ‚Äî cnetmod","text":"","code":"cnetPlotUI(id, panel)  cnetPlotServer(id, obj, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/cnetmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cnetplot module ‚Äî cnetmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactive, dataframe containing enrichment results config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/cnetmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cnetplot module ‚Äî cnetmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/cnetmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cnetplot module ‚Äî cnetmod","text":"","code":"library(shiny)  # get DESeqResults object data(res_dex, package='carnation')  obj <- reactive({ res })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(cnetPlotUI('p', 'sidebar')),            mainPanel(cnetPlotUI('p', 'main'))          ),     server = function(input, output, session){                cnetPlotServer('p', obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/create_access_yaml.html","id":null,"dir":"Reference","previous_headings":"","what":"Create access yaml ‚Äî create_access_yaml","title":"Create access yaml ‚Äî create_access_yaml","text":"function creates access yaml file. primarily intended first run.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/create_access_yaml.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create access yaml ‚Äî create_access_yaml","text":"","code":"create_access_yaml(user, user_group, data_area)"},{"path":"https://nichd-bspc.github.io/carnation/reference/create_access_yaml.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create access yaml ‚Äî create_access_yaml","text":"user User name user_group User group data_area Path data area containing RDS files","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/create_access_yaml.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create access yaml ‚Äî create_access_yaml","text":"Invisibly returns NULL. function primarily used side effect saving yaml file access settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/create_access_yaml.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create access yaml ‚Äî create_access_yaml","text":"","code":"# save access details to file home <- Sys.getenv('HOME')  # create carnation data area if it doesn't exist carnation_home <- file.path(home, 'carnation/data') if(!dir.exists(carnation_home)) dir.create(carnation_home) #> Warning: cannot create dir '/home/runner/carnation/data', reason 'No such file or directory'  create_access_yaml(user = 'admin',                    user_group = 'admin',                    data_area = carnation_home) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner"},{"path":"https://nichd-bspc.github.io/carnation/reference/degmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Pattern plot module ‚Äî degmod","title":"Pattern plot module ‚Äî degmod","text":"Module UI & server generate pattern plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pattern plot module ‚Äî degmod","text":"","code":"patternPlotUI(id, panel, tab)  patternPlotServer(id, obj, coldata, plot_args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/degmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pattern plot module ‚Äî degmod","text":"id Module id panel string, can 'sidebar' 'main' tab string, 'plot' show plot settings, 'table' show table settings; '', show settings . obj reactiveValues object containing carnation object coldata reactiveValues object containing object metadata plot_args reactive containing 'gene_scratchpad' (genes selected scratchpad) & 'upset_data' (list containing data upset plot module) config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pattern plot module ‚Äî degmod","text":"UI returns tagList module UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pattern plot module ‚Äî degmod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  cdata <- lapply(oobj$rld, function(x) colData(x))  coldata <- reactiveValues( all=cdata, curr=cdata )  plot_args <- reactive({   list(     gene_scratchpad=c('gene1', 'gene2'),     upset_data=list(genes=NULL, labels=NULL)   ) })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(            patternPlotUI('p', 'sidebar', 'both'),            conditionalPanel(condition = \"input.pattern_mode == 'Plot'\",              patternPlotUI('p', 'sidebar', 'plot')            ),            conditionalPanel(condition = \"input.pattern_mode == 'Table'\",              patternPlotUI('p', 'sidebar', 'table')            )          ),          mainPanel(            tabsetPanel(id='pattern_mode',              tabPanel('Plot',                patternPlotUI('p', 'plot')              ), # tabPanel plot               tabPanel('Cluster membership',                patternPlotUI('p', 'table')              ) # tabPanel cluster_membership             ) # tabsetPanel pattern_mode          ) # tabPanel pattern_analysis        ),   server = function(input, output, session){              patternPlotServer('deg_plot', obj, coldata,                                plot_args, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/degpatterns_dex.html","id":null,"dir":"Reference","previous_headings":"","what":"A degPatterns object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî degpatterns_dex","title":"A degPatterns object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî degpatterns_dex","text":"degPatterns object differentially expressed genes dexamethasone treatment comparison.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degpatterns_dex.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A degPatterns object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî degpatterns_dex","text":"degPatterns object, generated degPatterns function DEGreport package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degpatterns_dex.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A degPatterns object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî degpatterns_dex","text":"degPatterns object created test groups coexpressed genes top 100 differentially expressed genes dexamethasone treatment comparison. Details object created included create_carnation_data.R script, included scripts folder Carnation package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/degpatterns_dex.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"A degPatterns object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî degpatterns_dex","text":"Himes , Jiang X, Wagner P, Hu R, Wang Q, Klanderman B, Whitaker RM, Duan Q, Lasky-Su J, Nikolos C, Jester W, Johnson M, Panettieri R Jr, Tantisira KG, Weiss ST, Lu Q. ‚ÄúRNA-Seq Transcriptome Profiling Identifies CRISPLD2 Glucocorticoid Responsive Gene Modulates Cytokine Function Airway Smooth Muscle Cells.‚Äù PLoS One. 2014 Jun 13;9(6):e99625. PMID: 24926665. GEO: GSE52778","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dendromod.html","id":null,"dir":"Reference","previous_headings":"","what":"Dendrogram module ‚Äî dendromod","title":"Dendrogram module ‚Äî dendromod","text":"UI & module generate dendrograms.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dendromod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dendrogram module ‚Äî dendromod","text":"","code":"dendrogramUI(id, panel)  dendrogramServer(id, obj, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/dendromod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dendrogram module ‚Äî dendromod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing GeneTonic object config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dendromod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dendrogram module ‚Äî dendromod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dendromod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Dendrogram module ‚Äî dendromod","text":"","code":"library(shiny)  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(l_gs = gt$l_gs,        anno_df = gt$anno_df,        label = 'comp1') })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(dendrogramUI('p', 'sidebar')),            mainPanel(dendrogramUI('p', 'main'))          ),     server = function(input, output, session){                dendrogramServer('p', obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/distillmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Distilled enrichment map module ‚Äî distillmod","title":"Distilled enrichment map module ‚Äî distillmod","text":"UI & module generate distill enrichment map plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/distillmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Distilled enrichment map module ‚Äî distillmod","text":"","code":"distillPlotUI(id, panel)  distillPlotServer(id, obj, args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/distillmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Distilled enrichment map module ‚Äî distillmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactive containing 'distilled' enrichment results args reactive, list plot arguments, 'numcat' (number categories plot) config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/distillmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Distilled enrichment map module ‚Äî distillmod","text":"UI returns tagList plot UI server returns reactive number plotted terms","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/distillmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Distilled enrichment map module ‚Äî distillmod","text":"","code":"library(GeneTonic) #> Welcome to GeneTonic v3.0.0 #>  #> If you use GeneTonic in your work, please cite: #>  #>   GeneTonic: an R/Bioconductor package for streamlining the interpretation of RNA-seq data #>   Federico Marini, Annekathrin Ludt, Jan Linke, Konstantin Strauch #>   BMC Bioinformatics, 2021 - https://doi.org/10.1186/s12859-021-04461-5 #> and/or (if adopting the series of protocols as a whole) #>   Interactive and Reproducible Workflows for Exploring and Modeling RNA-seq Data with pcaExplorer, ideal, and GeneTonic #>   Annekathrin Ludt, Arsenij Ustjanzew, Harald Binder, Konstantin Strauch, Federico Marini #>   Current Protocols, 2022 - https://doi.org/10.1002/cpz1.411 #>  #> Attaching package: ‚ÄòGeneTonic‚Äô #> The following object is masked from ‚Äòpackage:carnation‚Äô: #>  #>     gs_radar library(shiny)  # get DESeqResults object data(res_dex, package='carnation')  # get enrichResult object data(eres_dex, package='carnation')  # preprocess & convert to GeneTonic object eres2 <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic... gt <- enrich_to_genetonic(eres_dex, res_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  # get distilled results df <- distill_enrichment(         eres2,         res_dex,         gt$anno_df,         n_gs = 10,         cluster_fun = \"cluster_markov\"       )  # number of plotted terms args <- reactive({ list(numcat=10) })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(distillPlotUI('p', 'sidebar')),            mainPanel(distillPlotUI('p', 'main'))          ),     server = function(input, output, session){                numcat <- observe({                  distillPlotServer('p',                                    reactive({ df }),                                    args,                                    config)                })              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/dlmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Download button module ‚Äî dlmod","title":"Download button module ‚Äî dlmod","text":"Module UI & server download buttons.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dlmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download button module ‚Äî dlmod","text":"","code":"downloadButtonUI(id)  downloadButtonServer(id, outplot, plot_type)"},{"path":"https://nichd-bspc.github.io/carnation/reference/dlmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download button module ‚Äî dlmod","text":"id Module id outplot reactive plot handle plot_type reactive/static value used output filename","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dlmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download button module ‚Äî dlmod","text":"UI returns tagList download button UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dlmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download button module ‚Äî dlmod","text":"","code":"library(shiny) library(ggplot2)  # get example object obj <- make_example_carnation_object() #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing res <- as.data.frame(obj$res[[1]])  # make MA plot p <- ggplot(res, aes(x=baseMean, y=log2foldChange)) +        geom_point(color='black', alpha=0.5)  outplot <- reactive({ p })  # app with a single button to download a plot if(interactive()){   shinyApp(     ui = fluidPage(            downloadButtonUI('p')          ),     server = function(input, output, session){                downloadButtonServer('p', outplot, 'maplot')              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/dummy_genetonic.html","id":null,"dir":"Reference","previous_headings":"","what":"Make dummy GeneTonic object ‚Äî dummy_genetonic","title":"Make dummy GeneTonic object ‚Äî dummy_genetonic","text":"Make dummy GeneTonic object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dummy_genetonic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make dummy GeneTonic object ‚Äî dummy_genetonic","text":"","code":"dummy_genetonic(eres)"},{"path":"https://nichd-bspc.github.io/carnation/reference/dummy_genetonic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make dummy GeneTonic object ‚Äî dummy_genetonic","text":"eres enrichResult object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/dummy_genetonic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make dummy GeneTonic object ‚Äî dummy_genetonic","text":"GeneTonic object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/emapmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Enrichment map plot module ‚Äî emapmod","title":"Enrichment map plot module ‚Äî emapmod","text":"UI & module generate enrichment map plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/emapmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enrichment map plot module ‚Äî emapmod","text":"","code":"enrichmapUI(id, panel)  enrichmapServer(id, obj, res_obj, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/emapmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enrichment map plot module ‚Äî emapmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing GeneTonic object res_obj reactive, dataframe containing enrichment results config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/emapmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enrichment map plot module ‚Äî emapmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/emapmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enrichment map plot module ‚Äî emapmod","text":"","code":"library(shiny)  # get DESeqResults object data(res_dex, package='carnation')  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(l_gs = gt$l_gs,        anno_df = gt$anno_df,        label = 'comp1') })  res_obj <- reactive({ res })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(enrichmapUI('p', 'sidebar')),            mainPanel(enrichmapUI('p', 'main'))          ),     server = function(input, output, session){                enrichmapServer('p', obj, res_obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/enrich_to_genetonic.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","title":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","text":"function takes enrichResult object DE analysis results creates GeneTonic object.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/enrich_to_genetonic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","text":"","code":"enrich_to_genetonic(enrich, res)"},{"path":"https://nichd-bspc.github.io/carnation/reference/enrich_to_genetonic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","text":"enrich enrichResult object res data frame DE analysis results","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/enrich_to_genetonic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","text":"GeneTonic object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/enrich_to_genetonic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert enrichResult to GeneTonic object ‚Äî enrich_to_genetonic","text":"","code":"# get enrich & res objects data(res_dex, package=\"carnation\") data(eres_dex, package=\"carnation\")  # convert to GeneTonic object gt <- enrich_to_genetonic(eres_dex, res_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic..."},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_cell.html","id":null,"dir":"Reference","previous_headings":"","what":"An enrichResult object for differentially expressed genes in the cell line comparison. ‚Äî eres_cell","title":"An enrichResult object for differentially expressed genes in the cell line comparison. ‚Äî eres_cell","text":"enrichResult object differentially expressed genes cell line comparison.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_cell.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An enrichResult object for differentially expressed genes in the cell line comparison. ‚Äî eres_cell","text":"enrichResult object, generated enrichGO function clusterProfiler package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_cell.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"An enrichResult object for differentially expressed genes in the cell line comparison. ‚Äî eres_cell","text":"enrichResult object created test functional enrichment using GO Biological Process (BP) ontology top 100 differentially expressed genes cell line comparison. Details object created included create_carnation_data.R script, included scripts folder Carnation package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_cell.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"An enrichResult object for differentially expressed genes in the cell line comparison. ‚Äî eres_cell","text":"Himes , Jiang X, Wagner P, Hu R, Wang Q, Klanderman B, Whitaker RM, Duan Q, Lasky-Su J, Nikolos C, Jester W, Johnson M, Panettieri R Jr, Tantisira KG, Weiss ST, Lu Q. ‚ÄúRNA-Seq Transcriptome Profiling Identifies CRISPLD2 Glucocorticoid Responsive Gene Modulates Cytokine Function Airway Smooth Muscle Cells.‚Äù PLoS One. 2014 Jun 13;9(6):e99625. PMID: 24926665. GEO: GSE52778","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_dex.html","id":null,"dir":"Reference","previous_headings":"","what":"An enrichResult object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî eres_dex","title":"An enrichResult object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî eres_dex","text":"enrichResult object differentially expressed genes dexamethasone treatment comparison.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_dex.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An enrichResult object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî eres_dex","text":"enrichResult object, generated enrichGO function clusterProfiler package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_dex.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"An enrichResult object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî eres_dex","text":"enrichResult object created test functional enrichment using GO Biological Process (BP) ontology top 100 differentially expressed genes dexamethasone treatment comparison. Details object created included create_carnation_data.R script, included scripts folder Carnation package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/eres_dex.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"An enrichResult object for differentially expressed genes in the dexamethasone treatment comparison. ‚Äî eres_dex","text":"Himes , Jiang X, Wagner P, Hu R, Wang Q, Klanderman B, Whitaker RM, Duan Q, Lasky-Su J, Nikolos C, Jester W, Johnson M, Panettieri R Jr, Tantisira KG, Weiss ST, Lu Q. ‚ÄúRNA-Seq Transcriptome Profiling Identifies CRISPLD2 Glucocorticoid Responsive Gene Modulates Cytokine Function Airway Smooth Muscle Cells.‚Äù PLoS One. 2014 Jun 13;9(6):e99625. PMID: 24926665. GEO: GSE52778","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/format_genes.html","id":null,"dir":"Reference","previous_headings":"","what":"format gene names to look pretty in table output ‚Äî format_genes","title":"format gene names to look pretty in table output ‚Äî format_genes","text":"function works grouping long lists genes groups specified size. group collapsed using commas, groups separated spaces datatable formatting tricked separating space-separated groups comma-separated groups","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/format_genes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"format gene names to look pretty in table output ‚Äî format_genes","text":"","code":"format_genes(g, sep = \"\\\\/\", genes.per.line = 6)"},{"path":"https://nichd-bspc.github.io/carnation/reference/format_genes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"format gene names to look pretty in table output ‚Äî format_genes","text":"g vector gene names sep gene name separator genes.per.line number genes show line","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/format_genes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"format gene names to look pretty in table output ‚Äî format_genes","text":"vector gene names prettified data.table output","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/format_genes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"format gene names to look pretty in table output ‚Äî format_genes","text":"","code":"# string with genes separated by '/' g <- \"gene1/gene2/gene3/gene4/gene5/gene6/gene7\"  gg <- format_genes(g, genes.per.line=3)"},{"path":"https://nichd-bspc.github.io/carnation/reference/fromList.with.names.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","title":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","text":"Prepare list UpSet plots, include rownames","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fromList.with.names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","text":"","code":"fromList.with.names(lst)"},{"path":"https://nichd-bspc.github.io/carnation/reference/fromList.with.names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","text":"lst List sets compare (input UpSetR::fromList)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fromList.with.names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","text":"data.frame 1 0 showing genes sets","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fromList.with.names.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare list for UpSet plots, but include rownames ‚Äî fromList.with.names","text":"","code":"# list of genes lst <- list(group1 = c(a = \"gene1\", b = \"gene2\", c = \"gene3\", d = \"gene4\"),             group2 = c(c = \"gene3\", d = \"gene4\"))  # binarized matrix with group membership df <- fromList.with.names(lst)"},{"path":"https://nichd-bspc.github.io/carnation/reference/funenrichmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Functional enrichment module ‚Äî funenrichmod","title":"Functional enrichment module ‚Äî funenrichmod","text":"UI & module show functional enrichment tables & plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/funenrichmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Functional enrichment module ‚Äî funenrichmod","text":"","code":"enrichUI(id, panel, tab = \"none\")  enrichServer(id, obj, upset_table, gene_scratchpad, reset_genes, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/funenrichmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Functional enrichment module ‚Äî funenrichmod","text":"id ID string used match ID used call module UI function panel string, can 'sidebar' 'main' tab string, 'table' show table settings, 'plots' show plot settings; 'compare_results', show comparison settings. obj reactiveValues object containing carnation object upset_table reactive, data upset plot module gene_scratchpad reactive, genes selected gene scratchpad reset_genes reactive reset genes scratchpad config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/funenrichmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Functional enrichment module ‚Äî funenrichmod","text":"UI returns tagList plot UI server returns reactive gene selected functional enrichment tables.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/funenrichmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Functional enrichment module ‚Äî funenrichmod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  upset_table <- reactiveValues(tbl=NULL, intersections=NULL, set_labels=NULL)  gene_scratchpad <- reactive({ c('gene1', 'gene2') })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(            conditionalPanel(condition = \"input.func == 'Table'\",              enrichUI('p', 'sidebar', 'table')            ),            conditionalPanel(condition = \"input.func == 'Plot'\",              enrichUI('p', 'sidebar', 'plot')            ),            conditionalPanel(condition = \"input.func == 'Compare results'\",              enrichUI('p', 'sidebar', 'compare_results')            )          ),          mainPanel(              tabsetPanel(id='func',                tabPanel('Table',                  enrichUI('p', 'main', 'table')                ), # tabPanel table                 tabPanel('Plot',                  enrichUI('p', 'main', 'plot')                ), # tabPanel plot                 tabPanel('Compare results',                  enrichUI('p', 'main', 'compare_results')                ) # tabPanel compare_results               ) # tabsetPanel func            ) # tabPanel          ),   server = function(input, output, session){              enrich_data <- enrichServer('p', obj,                                          upset_table,                                          gene_scratchpad,                                          reactive({ FALSE }),                                          config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/fuzzymod.html","id":null,"dir":"Reference","previous_headings":"","what":"Fuzzy enrichment map module ‚Äî fuzzymod","title":"Fuzzy enrichment map module ‚Äî fuzzymod","text":"UI & module generate fuzzy enrichment map plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fuzzymod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fuzzy enrichment map module ‚Äî fuzzymod","text":"","code":"fuzzyPlotUI(id, panel)  fuzzyPlotServer(id, obj, args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/fuzzymod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fuzzy enrichment map module ‚Äî fuzzymod","text":"id Module id panel string, can 'sidebar' 'main' obj reactive containing 'distilled' enrichment results args reactive, list plot arguments, 'numcat' (number categories plot) config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fuzzymod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fuzzy enrichment map module ‚Äî fuzzymod","text":"UI returns tagList plot UI server returns reactive number plotted terms","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/fuzzymod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fuzzy enrichment map module ‚Äî fuzzymod","text":"","code":"library(shiny)  # get enrichResult object data(eres_dex, package='carnation')  # preprocess & convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  # get distilled results df <- GeneTonic::gs_fuzzyclustering(gt[seq_len(10),],         similarity_threshold = 0.35,         fuzzy_seeding_initial_neighbors = 3,         fuzzy_multilinkage_rule = 0.5)  # number of plotted terms args <- reactive({ list(numcat=10) })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(fuzzyPlotUI('p', 'sidebar')),            mainPanel(fuzzyPlotUI('p', 'main'))          ),     server = function(input, output, session){                numcat <- observe({                  fuzzyPlotServer('p',                                  reactive({ df }),                                  args,                                  config)                })              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/geneplotmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Gene plot module ‚Äî geneplotmod","title":"Gene plot module ‚Äî geneplotmod","text":"UI & server module create gene plot","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/geneplotmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gene plot module ‚Äî geneplotmod","text":"","code":"genePlotUI(id, panel)  genePlotServer(id, obj, coldata, plot_args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/geneplotmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gene plot module ‚Äî geneplotmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing carnation object coldata reactiveValues object containing object metadata plot_args reactive list 3 elements: 'gene.id' (gene IDs) & 'gene_scratchpad' (genes selected scratchpad) & 'comp_all' (selected comparison) config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/geneplotmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gene plot module ‚Äî geneplotmod","text":"UI returns tagList gene plot UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/geneplotmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Gene plot module ‚Äî geneplotmod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  # Set up coldata structure that the module expects coldata <- reactiveValues(   curr = list(     all_samples = colData(oobj$dds$main),     main = colData(oobj$dds$main)   ) )  plot_args <- reactive({   list(     gene.to.plot = c(\"gene1\", \"gene2\"),     gene.id = rownames(oobj$dds$main),     comp_all = \"comp1\"   ) })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(genePlotUI('p', 'sidebar')),          mainPanel(genePlotUI('p', 'main'))        ),   server = function(input, output, session){              genePlotServer('p', obj, coldata, plot_args, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_access_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get path to access yaml file ‚Äî get_access_path","title":"Get path to access yaml file ‚Äî get_access_path","text":"function checks environment variable 'CARNATION_ACCESS_YAML' specify directory save access yaml. env variable exist uses home directory save location.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_access_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get path to access yaml file ‚Äî get_access_path","text":"","code":"get_access_path()"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_access_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get path to access yaml file ‚Äî get_access_path","text":"path access yaml","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_access_path.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get path to access yaml file ‚Äî get_access_path","text":"","code":"p <- get_access_path() #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_config.html","id":null,"dir":"Reference","previous_headings":"","what":"Get config ‚Äî get_config","title":"Get config ‚Äî get_config","text":"function reads config.yaml returns list","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_config.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get config ‚Äî get_config","text":"","code":"get_config()"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_config.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get config ‚Äî get_config","text":"list containing config items","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_config.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get config ‚Äî get_config","text":"","code":"cfg <- get_config()"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_degplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a degPatterns object ‚Äî get_degplot","title":"Plot a degPatterns object ‚Äî get_degplot","text":"function plots degPatterns object.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_degplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a degPatterns object ‚Äî get_degplot","text":"","code":"get_degplot(   obj,   time,   color = NULL,   cluster_column = \"cluster\",   cluster_to_show,   x_order,   points = TRUE,   boxes = TRUE,   smooth = \"smooth\",   lines = TRUE,   facet = TRUE,   prefix_title = \"Cluster \",   genes_to_label = NULL )"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_degplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a degPatterns object ‚Äî get_degplot","text":"obj degPatterns object time metadata variable plot x-axis color variable color plot cluster_column column use grouping genes cluster_to_show clusters show plot x_order order x-axis values points boolean, show samples plot? Default: TRUE boxes boolean, show boxes plot? Default: TRUE smooth type trendline use? can 'smooth' (default) 'line'. lines show lines joining samples? Default: TRUE facet boolean, plot faceted? Default: TRUE prefix_title string, prefix facet titles genes_to_label genes label plot","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_degplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a degPatterns object ‚Äî get_degplot","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_degplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a degPatterns object ‚Äî get_degplot","text":"","code":"# get degpatterns object data(degpatterns_dex, package = 'carnation')  # get pattern plot all_clusters <- unique(degpatterns_dex$normalized$cluster)  dp <- get_degplot(degpatterns_dex, time='dex',                   cluster_to_show=all_clusters,                   x_order=c('untrt','trt'))"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_gene_counts.html","id":null,"dir":"Reference","previous_headings":"","what":"Get read counts for gene ‚Äî get_gene_counts","title":"Get read counts for gene ‚Äî get_gene_counts","text":"simple function obtain read counts specified gene, based DESeq2::plotCounts function.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_gene_counts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get read counts for gene ‚Äî get_gene_counts","text":"","code":"get_gene_counts(dds, gene, intgroup = \"condition\", norm_method = \"libsize\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_gene_counts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get read counts for gene ‚Äî get_gene_counts","text":"dds DESeqDataSet object gene gene name vector intgroup metadata variable attach counts norm_method normalization method, can 'libsize' (default) 'vst'","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_gene_counts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get read counts for gene ‚Äî get_gene_counts","text":"data.frame gene counts","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_gene_counts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get read counts for gene ‚Äî get_gene_counts","text":"","code":"# make example DESeq data set dds <- DESeq2::makeExampleDESeqDataSet()  # get counts for gene1 gg <- get_gene_counts(dds, 'gene1')"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_project_name_from_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get project name from path ‚Äî get_project_name_from_path","title":"Get project name from path ‚Äî get_project_name_from_path","text":"function takes path RDS file returns string used project name","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_project_name_from_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get project name from path ‚Äî get_project_name_from_path","text":"","code":"get_project_name_from_path(   x,   depth = 2,   end_offset = 0,   staging_dir = \"dev\",   fsep = .Platform$file.sep )"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_project_name_from_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get project name from path ‚Äî get_project_name_from_path","text":"x character path RDS file depth integer many levels path look? end_offset integer far end path end? staging_dir name staging directory fsep file separator split path ","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_project_name_from_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get project name from path ‚Äî get_project_name_from_path","text":"project name parsed path object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_project_name_from_path.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get project name from path ‚Äî get_project_name_from_path","text":"","code":"# path to carnation object obj_path <- \"/path/to/project/test/main.rnaseq.rds\"  # parsed project name get_project_name_from_path(obj_path, depth = 2, end_offset = 0) #> [1] \"project/test\""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_upset_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate upset plot table ‚Äî get_upset_table","title":"Generate upset plot table ‚Äî get_upset_table","text":"Generate upset plot table","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_upset_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate upset plot table ‚Äî get_upset_table","text":"","code":"get_upset_table(gene.lists, comp_split_pattern = \";\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_upset_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate upset plot table ‚Äî get_upset_table","text":"gene.lists list character vectors gene names comp_split_pattern character used separate gene set names","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_upset_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate upset plot table ‚Äî get_upset_table","text":"list upset table elements","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_upset_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate upset plot table ‚Äî get_upset_table","text":"","code":"lst <- list(group1 = c(a = \"gene1\", b = \"gene2\", c = \"gene3\", d = \"gene4\"),             group2 = c(b = \"gene2\", d = \"gene4\", e = \"gene5\"),             group3 = c(d = \"gene4\", e = \"gene5\", f = \"gene6\"))  df <- get_upset_table(lst) str(df) #> List of 3 #>  $ tbl        :'data.frame':\t6 obs. of  7 variables: #>   ..$ symbol     : chr [1:6] \"gene1\" \"gene3\" \"gene6\" \"gene5\" ... #>   ..$ set        : chr [1:6] \"set1\" \"set1\" \"set2\" \"set3\" ... #>   ..$ group1     : int [1:6] 1 1 0 0 1 1 #>   ..$ group2     : int [1:6] 0 0 0 1 1 1 #>   ..$ group3     : int [1:6] 0 0 1 1 0 1 #>   ..$ comparisons: chr [1:6] \"group1\" \"group1\" \"group3\" \"group2;group3\" ... #>   ..$ degree     : int [1:6] 1 1 1 2 2 3 #>  $ set_mapping:List of 5 #>   ..$ set1: chr \"group1\" #>   ..$ set2: chr \"group3\" #>   ..$ set3: chr [1:2] \"group2\" \"group3\" #>   ..$ set4: chr [1:2] \"group1\" \"group2\" #>   ..$ set5: chr [1:3] \"group1\" \"group2\" \"group3\" #>  $ set_labels : Named chr [1:5] \"set1\" \"set2\" \"set3\" \"set4\" ... #>   ..- attr(*, \"names\")= chr [1:5] \"set1 (group1; n = 2)\" \"set2 (group3; n = 1)\" \"set3 (group2, group3; n = 1)\" \"set4 (group1, group2; n = 1)\" ..."},{"path":"https://nichd-bspc.github.io/carnation/reference/get_y_init.html","id":null,"dir":"Reference","previous_headings":"","what":"Get initial y-axis limits ‚Äî get_y_init","title":"Get initial y-axis limits ‚Äî get_y_init","text":"Get initial y-axis limits","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_y_init.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get initial y-axis limits ‚Äî get_y_init","text":"","code":"get_y_init(df, y_delta, pseudocount)"},{"path":"https://nichd-bspc.github.io/carnation/reference/get_y_init.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get initial y-axis limits ‚Äî get_y_init","text":"df data.frame counts. Must column 'count' y_delta y-axis padding visualization, must 0 1 pseudocount pseudo-count add data.frame","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_y_init.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get initial y-axis limits ‚Äî get_y_init","text":"min max limits count column, padded visualization","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/get_y_init.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get initial y-axis limits ‚Äî get_y_init","text":"","code":"# make example DESeq dataset dds <- DESeq2::makeExampleDESeqDataSet()  # get gene counts df <- get_gene_counts(dds, gene = c('gene1', 'gene2'))  # get y axis limits get_y_init(df, y_delta = 0.01, pseudocount = 1) #> [1]   3 152"},{"path":"https://nichd-bspc.github.io/carnation/reference/getcountplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create gene plot ‚Äî getcountplot","title":"Create gene plot ‚Äî getcountplot","text":"function creates gene plot.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/getcountplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create gene plot ‚Äî getcountplot","text":"","code":"getcountplot(   df,   intgroup = \"group\",   factor.levels,   title = NULL,   ylab = \"Normalized counts\",   color = \"gene\",   nrow = 2,   ymin = NULL,   ymax = NULL,   log = TRUE,   freey = FALSE,   trendline = \"smooth\",   facet = NULL,   legend = TRUE,   boxes = TRUE,   rotate_x_labels = 30 )"},{"path":"https://nichd-bspc.github.io/carnation/reference/getcountplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create gene plot ‚Äî getcountplot","text":"df data.frame gene counts intgroup metadata variable plot x-axis factor.levels levels intgroup show x-axis title title plot ylab y-axis label color metadata variable color nrow number rows plot faceting ymin y-axis lower limit ymax y-axis upper limit log y-axis log10-transformed? freey y-axes faceted plots independent scales? trendline type trendline draw facet metadata variable facet legend show legend? boxes show boxes? rotate_x_labels angle rotate x-axis labels (default=30)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/getcountplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create gene plot ‚Äî getcountplot","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/getcountplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create gene plot ‚Äî getcountplot","text":"","code":"# make example DESeq dataset dds <- DESeq2::makeExampleDESeqDataSet()  # get gene counts df <- get_gene_counts(dds, gene = c('gene1', 'gene2'))  # standard gene plot p <- getcountplot(df, intgroup = \"condition\", factor.levels = c(\"A\", \"B\"))  # with genes faceted p1 <- getcountplot(df, intgroup = \"condition\", factor.levels = c(\"A\", \"B\"), facet = \"gene\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/gs_radar.html","id":null,"dir":"Reference","previous_headings":"","what":"Radar plot ‚Äî gs_radar","title":"Radar plot ‚Äî gs_radar","text":"copy gs_radar GeneTonic labels gene sets converted parameters","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/gs_radar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Radar plot ‚Äî gs_radar","text":"","code":"gs_radar(   res_enrich,   res_enrich2 = NULL,   label1 = \"scenario 1\",   label2 = \"scenario 2\",   n_gs = 20,   p_value_column = \"gs_pvalue\" )"},{"path":"https://nichd-bspc.github.io/carnation/reference/gs_radar.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Radar plot ‚Äî gs_radar","text":"res_enrich GeneTonic object comparison 1 res_enrich2 GeneTonic object comparison 2 (default = NULL) label1 label comparison 1 label2 label comparison 2 n_gs number gene sets (default = 20) p_value_column column use p-value (default = 'gs_pvalue')","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/gs_radar.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Radar plot ‚Äî gs_radar","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/gs_radar.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Radar plot ‚Äî gs_radar","text":"","code":"library(GeneTonic)  # get DESeqResults object data(res_dex, package='carnation')  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  # get annotation df idx <- match(c('gene','symbol'), tolower(colnames(res_dex))) anno_df <- res_dex[,idx] colnames(anno_df) <- c('gene_id', 'gene_name')  # add aggregate score columns gt <- get_aggrscores(gt, res_dex, anno_df)  # make radar plot p <- gs_radar(gt)"},{"path":"https://nichd-bspc.github.io/carnation/reference/heatmapmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Heatmap module ‚Äî heatmapmod","title":"Heatmap module ‚Äî heatmapmod","text":"Module UI & server generate heatmap.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/heatmapmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Heatmap module ‚Äî heatmapmod","text":"","code":"heatmapUI(id, panel)  heatmapServer(id, obj, coldata, plot_args, gene_scratchpad, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/heatmapmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Heatmap module ‚Äî heatmapmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing carnation object coldata reactiveValues object containing object metadata plot_args reactive containing 'fdr.thres' (padj threshold), 'fc.thres' (log2FC) & 'upset_data' (list containing data upset plot module) gene_scratchpad reactiveValues object containing genes selected scratchpad labeled config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/heatmapmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Heatmap module ‚Äî heatmapmod","text":"UI returns tagList heatmap UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/heatmapmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Heatmap module ‚Äî heatmapmod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  cdata <- lapply(oobj$rld, function(x) colData(x))  coldata <- reactiveValues( all=cdata, curr=cdata )  plot_args <- reactive({   list(     fdr.thres=0.1,     fc.thres=0,     upset_data=list(genes=NULL, labels=NULL)   ) })  gene_scratchpad <- reactive({ c('gene1', 'gene2') })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(heatmapUI('p', 'sidebar')),          mainPanel(heatmapUI('p', 'sidebar'))        ),   server = function(input, output, session){              heatmapServer('p', obj, coldata,                            plot_args, gene_scratchpad, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/helpModal.html","id":null,"dir":"Reference","previous_headings":"","what":"Help modal ‚Äî helpModal","title":"Help modal ‚Äî helpModal","text":"generates modal dialog includes text markdown file.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpModal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Help modal ‚Äî helpModal","text":"","code":"helpModal(mdfile, title = NULL, ...)"},{"path":"https://nichd-bspc.github.io/carnation/reference/helpModal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Help modal ‚Äî helpModal","text":"mdfile path markdown file title Title modal dialog ... params passed modalDialog()","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpModal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Help modal ‚Äî helpModal","text":"Modal dialog help documentation.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Help button module ‚Äî helpmod","title":"Help button module ‚Äî helpmod","text":"Module UI & server help buttons.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Help button module ‚Äî helpmod","text":"","code":"helpButtonUI(id)  helpButtonServer(id, ...)"},{"path":"https://nichd-bspc.github.io/carnation/reference/helpmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Help button module ‚Äî helpmod","text":"id Module id. also doubles prefixes help text files. ... params passed helpModal()","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Help button module ‚Äî helpmod","text":"UI returns tagList help button UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/helpmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Help button module ‚Äî helpmod","text":"","code":"library(shiny)  # app with a single help button to show DE summary table details if(interactive()){   shinyApp(     ui = fluidPage(            helpButtonUI('de_summary_help')          ),     server = function(input, output, session){                helpButtonServer('de_summary_help')              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/horizonmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Horizon plot module ‚Äî horizonmod","title":"Horizon plot module ‚Äî horizonmod","text":"UI & module generate horizon plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/horizonmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Horizon plot module ‚Äî horizonmod","text":"","code":"horizonUI(id, panel)  horizonServer(id, obj, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/horizonmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Horizon plot module ‚Äî horizonmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing two GeneTonic objects config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/horizonmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Horizon plot module ‚Äî horizonmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/horizonmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Horizon plot module ‚Äî horizonmod","text":"","code":"library(shiny)  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  # get second enrichResult object data(eres_cell, package='carnation')  # convert to GeneTonic object gt1 <- GeneTonic::shake_enrichResult(eres_cell) #> Found 3706 gene sets in `enrichResult` object, of which 3706 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(     obj1 = list(l_gs = gt$l_gs,              anno_df = gt$anno_df,              label = 'comp1'),     obj2 = list(l_gs = gt1$l_gs,              anno_df = gt1$anno_df,              label = 'comp2')   ) })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(horizonUI('p', 'sidebar')),            mainPanel(horizonUI('p', 'main'))          ),     server = function(input, output, session){                horizonServer('p', obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/in_admin_group.html","id":null,"dir":"Reference","previous_headings":"","what":"is user is in admin group? ‚Äî in_admin_group","title":"is user is in admin group? ‚Äî in_admin_group","text":"user admin group?","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/in_admin_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"is user is in admin group? ‚Äî in_admin_group","text":"","code":"in_admin_group(u)"},{"path":"https://nichd-bspc.github.io/carnation/reference/in_admin_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"is user is in admin group? ‚Äî in_admin_group","text":"u username","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/in_admin_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"is user is in admin group? ‚Äî in_admin_group","text":"TRUE/FALSE indicate user part admin group","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/in_admin_group.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"is user is in admin group? ‚Äî in_admin_group","text":"","code":"# save access details to file home <- Sys.getenv('HOME')  # create carnation data area if it doesn't exist carnation_home <- file.path(home, 'carnation/data') if(!dir.exists(carnation_home)) dir.create(carnation_home) #> Warning: cannot create dir '/home/runner/carnation/data', reason 'No such file or directory'  create_access_yaml(user = 'admin',                    user_group = 'admin',                    data_area = carnation_home) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  check <- in_admin_group('user') #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner"},{"path":"https://nichd-bspc.github.io/carnation/reference/install_carnation.html","id":null,"dir":"Reference","previous_headings":"","what":"Create carnation python environment ‚Äî install_carnation","title":"Create carnation python environment ‚Äî install_carnation","text":"function installs 'plotly' 'kaleido' python packages environment allow PDF downloads plotly plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/install_carnation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create carnation python environment ‚Äî install_carnation","text":"","code":"install_carnation(envname, ...)"},{"path":"https://nichd-bspc.github.io/carnation/reference/install_carnation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create carnation python environment ‚Äî install_carnation","text":"envname name python environment ... parameters passed reticulate::py_install","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/install_carnation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create carnation python environment ‚Äî install_carnation","text":"NULL, invisibly. function called side effects.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/install_carnation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create carnation python environment ‚Äî install_carnation","text":"","code":"if(interactive()){     install_carnation() }"},{"path":"https://nichd-bspc.github.io/carnation/reference/is_site_admin.html","id":null,"dir":"Reference","previous_headings":"","what":"is user an admin? ‚Äî is_site_admin","title":"is user an admin? ‚Äî is_site_admin","text":"user admin?","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/is_site_admin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"is user an admin? ‚Äî is_site_admin","text":"","code":"is_site_admin(u)"},{"path":"https://nichd-bspc.github.io/carnation/reference/is_site_admin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"is user an admin? ‚Äî is_site_admin","text":"u username","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/is_site_admin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"is user an admin? ‚Äî is_site_admin","text":"boolean indicate user admin group","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/is_site_admin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"is user an admin? ‚Äî is_site_admin","text":"","code":"# check if default user is admin yy <- is_site_admin(u='admin')"},{"path":"https://nichd-bspc.github.io/carnation/reference/loadmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Load data module ‚Äî loadmod","title":"Load data module ‚Äî loadmod","text":"Module UI & server load new data","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/loadmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load data module ‚Äî loadmod","text":"","code":"loadDataUI(id)  loadDataServer(id, username, config, rds = NULL)"},{"path":"https://nichd-bspc.github.io/carnation/reference/loadmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load data module ‚Äî loadmod","text":"id Module id username user name config reactive list config settings rds Object edited","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/loadmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load data module ‚Äî loadmod","text":"UI returns tagList module UI Server returns reactive app reload trigger","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/loadmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load data module ‚Äî loadmod","text":"","code":"if (FALSE) { # interactive() library(shiny)  username <- 'admin'  config <- reactiveVal(get_config())  obj <- make_example_carnation_object()  rds <- reactive({ obj=obj })  shinyApp(   ui = fluidPage(          loadDataUI('p')        ),   server = function(input, output, session){              loadDataServer('p', username=username, config, rds)            } )  }"},{"path":"https://nichd-bspc.github.io/carnation/reference/makeEnrichResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","title":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","text":"parameters just placeholders dataframe must contain columns 'ID' 'geneID'","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/makeEnrichResult.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","text":"","code":"makeEnrichResult(   df,   split = \"/\",   keytype = \"UNKNOWN\",   ontology = \"UNKNOWN\",   type = \"enrichResult\" )"},{"path":"https://nichd-bspc.github.io/carnation/reference/makeEnrichResult.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","text":"df data frame functional enrichment results split string, character used split gene IDs keytype type gene ID ontology ontology database used type string, can 'enrichResult' 'gseaResult'","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/makeEnrichResult.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","text":"enrichResult object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/makeEnrichResult.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make an enrichResult obj from a data frame ‚Äî makeEnrichResult","text":"","code":"# get enrichResult object data(eres_dex, package='carnation')  # extract the results df <- as.data.frame(eres_dex)  # convert to a stripped down enrichResult object eres2 <- makeEnrichResult(df)"},{"path":"https://nichd-bspc.github.io/carnation/reference/make_example_carnation_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Make example carnation object ‚Äî make_example_carnation_object","title":"Make example carnation object ‚Äî make_example_carnation_object","text":"Returns example carnation object used examples & testing","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/make_example_carnation_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make example carnation object ‚Äî make_example_carnation_object","text":"","code":"make_example_carnation_object()"},{"path":"https://nichd-bspc.github.io/carnation/reference/make_example_carnation_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make example carnation object ‚Äî make_example_carnation_object","text":"reactiveValues object containing carnation object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/make_example_carnation_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make example carnation object ‚Äî make_example_carnation_object","text":"","code":"if (FALSE) { # interactive() obj <- make_example_carnation_object() }"},{"path":"https://nichd-bspc.github.io/carnation/reference/make_final_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Make final object for internal use by the app ‚Äî make_final_object","title":"Make final object for internal use by the app ‚Äî make_final_object","text":"function takes uploaded object sanitizes make sure suitable internal use along additions: adds 'dds_mapping' element maps dds_list keys res_list objects. multiple dds_list objects, adds 'all_dds' element combining samples.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/make_final_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make final object for internal use by the app ‚Äî make_final_object","text":"","code":"make_final_object(obj)"},{"path":"https://nichd-bspc.github.io/carnation/reference/make_final_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make final object for internal use by the app ‚Äî make_final_object","text":"obj list object containing lists DE analysis results, functional enrichment objects, pattern analysis objects & raw normalized counts objects.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/make_final_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make final object for internal use by the app ‚Äî make_final_object","text":"final carnation object additional pre-processing","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/make_final_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make final object for internal use by the app ‚Äî make_final_object","text":"","code":"if (FALSE) { # interactive() library(DESeq2)  # make example DESeq dataset dds <- makeExampleDESeqDataSet()  # run DE analysis dds <- DESeq(dds)  # extract comparison of interest res <- results(dds, contrast = c(\"condition\", \"A\", \"B\"))  # perform VST normalization rld <- varianceStabilizingTransformation(dds, blind = TRUE)  # build minimal object obj <- list(            res_list = list(                           comp = list(                               res = res,                               dds = \"main\",                               label = \"A vs B\"                           )                       ),            dds_list = list(main = dds),            rld_list = list(main = rld)        )  # final object final_obj <- make_final_object(obj) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/maplotmod.html","id":null,"dir":"Reference","previous_headings":"","what":"MA plot module ‚Äî maplotmod","title":"MA plot module ‚Äî maplotmod","text":"UI & server module create MA plot","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/maplotmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MA plot module ‚Äî maplotmod","text":"","code":"maPlotUI(id, panel)  maPlotServer(id, obj, plot_args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/maplotmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MA plot module ‚Äî maplotmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing carnation object plot_args reactive containing 'fdr.thres' (padj threshold), 'fc.thres' (log2FC threshold) & 'gene..plot' (genes selected scratchpad) config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/maplotmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MA plot module ‚Äî maplotmod","text":"UI returns tagList MA plot UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/maplotmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MA plot module ‚Äî maplotmod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  # Set up coldata structure that the module expects coldata <- reactiveValues(   curr = list(     all_samples = colData(oobj$dds$main),     main = colData(oobj$dds$main)   ) )  plot_args <- reactive({   list(     fdr.thres=0.1,     fc.thres=0,     gene.to.plot=c('gene1', 'gene2')   ) })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(maPlotUI('p', 'sidebar')),          mainPanel(maPlotUI('p', 'main'))        ),   server = function(input, output, session){              maPlotServer('p', obj, plot_args, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/metamod.html","id":null,"dir":"Reference","previous_headings":"","what":"Metadata module ‚Äî metamod","title":"Metadata module ‚Äî metamod","text":"module generates metadata tab allows users view metadata associated loaded carnation object.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/metamod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Metadata module ‚Äî metamod","text":"","code":"metadataUI(id, panel)  metadataServer(id, obj, cols.to.drop)"},{"path":"https://nichd-bspc.github.io/carnation/reference/metamod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Metadata module ‚Äî metamod","text":"id Module id panel context generating ui elements ('sidebar' 'main') obj reactiveValues object containing carnation object cols..drop columns hide table","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/metamod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Metadata module ‚Äî metamod","text":"UI returns tagList metadata UI. Server returns reactive object metadata.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/metamod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Metadata module ‚Äî metamod","text":"","code":"if (FALSE) { # interactive() library(shiny)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  config <- get_config() cols.to.drop <- config$server$cols.to.drop  shinyApp(   ui = fluidPage(          sidebarPanel(metadataUI('p', 'sidebar')),          mainPanel(metadataUI('p', 'main'))        ),   server = function(input, output, session){              # reactiveVal to save updates              saved_data <- reactiveVal()               cdata <- metadataServer('p', obj, cols.to.drop)               observeEvent(cdata(), {                saved_data(cdata())              })            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/my.summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","title":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","text":"summary(res) prints info; function captures dataframe","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/my.summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","text":"","code":"my.summary(res, dds, alpha, lfc.thresh = 0)"},{"path":"https://nichd-bspc.github.io/carnation/reference/my.summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","text":"res DESeq2 results object dds DEseq2 object alpha Alpha level call significantly changing genes lfc.thresh log2FoldChange threshold","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/my.summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","text":"Dataframe summarized results","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/my.summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize DESeq2 results into a dataframe ‚Äî my.summary","text":"","code":"library(DESeq2)  # make example DESeq data set dds <- makeExampleDESeqDataSet()  # run DESeq2 dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # make comparisons res <- results(dds, contrast=c('condition', 'A', 'B'))  # get summary df <- my.summary(res, dds, alpha=0.1)"},{"path":"https://nichd-bspc.github.io/carnation/reference/pcamod.html","id":null,"dir":"Reference","previous_headings":"","what":"PCA plot module ‚Äî pcamod","title":"PCA plot module ‚Äî pcamod","text":"Module UI + server generate pca plot.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/pcamod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"PCA plot module ‚Äî pcamod","text":"","code":"pcaPlotUI(id, panel)  pcaPlotServer(id, obj, coldata, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/pcamod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"PCA plot module ‚Äî pcamod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing carnation object coldata reactiveValues object containing object metadata config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/pcamod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"PCA plot module ‚Äî pcamod","text":"UI returns tagList PCA plot UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/pcamod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"PCA plot module ‚Äî pcamod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  # Set up coldata structure that the module expects coldata <- reactiveValues(   curr = list(     all_samples = colData(oobj$dds$main),     main = colData(oobj$dds$main)   ) )  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(pcaPlotUI('p', 'sidebar')),          mainPanel(pcaPlotUI('p', 'main'))        ),   server = function(input, output, session){              pcaPlotServer('p', obj, coldata, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a labeled MA plot ‚Äî plotMA.label","title":"Create a labeled MA plot ‚Äî plotMA.label","text":"function creates MA plot data.frame containing DE analysis results.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a labeled MA plot ‚Äî plotMA.label","text":"","code":"plotMA.label(   res,   fdr.thres = 0.01,   fc.thres = 0,   fc.lim = NULL,   lab.genes = NULL,   tolower.cols = c(\"SYMBOL\", \"ALIAS\") )"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a labeled MA plot ‚Äî plotMA.label","text":"res data.frame DE analysis results. Must contain \"padj\" & \"log2FoldChange\" columns fdr.thres False discovery rate (FDR) threshold fc.thres log2FoldChange threshold fc.lim y-axis limits lab.genes genes label MA plot tolower.cols column names converted lower case","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a labeled MA plot ‚Äî plotMA.label","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a labeled MA plot ‚Äî plotMA.label","text":"","code":"library(DESeq2)  # make example DESeq dataset dds <- makeExampleDESeqDataSet()  # run DE analysis dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # extract comparison of interest res <- results(dds, contrast = c(\"condition\", \"A\", \"B\"))  # add gene and symbol column res$gene <- rownames(res) res$symbol <- rownames(res)  plotMA.label(res, lab.genes = c(\"gene1\", \"gene2\")) #> Warning: log-10 transformation introduced infinite values."},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label_ly.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","title":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","text":"function creates MA plot data.frame containing DE analysis results using plot_ly","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label_ly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","text":"","code":"plotMA.label_ly(   res,   fdr.thres = 0.01,   fc.thres = 0,   fc.lim = NULL,   lab.genes = NULL,   tolower.cols = c(\"SYMBOL\", \"ALIAS\") )"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label_ly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","text":"res data.frame DE analysis results. Must contain \"padj\" & \"log2FoldChange\" columns fdr.thres False discovery rate (FDR) threshold fc.thres log2FoldChange threshold fc.lim y-axis limits lab.genes genes label MA plot tolower.cols column names converted lower case","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label_ly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","text":"plotly handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotMA.label_ly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an interactive labeled MA plot ‚Äî plotMA.label_ly","text":"","code":"library(DESeq2)  # make example DESeq dataset dds <- makeExampleDESeqDataSet()  # run DE analysis dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # extract comparison of interest res <- results(dds, contrast = c(\"condition\", \"A\", \"B\"))  # add gene and symbol column res$gene <- rownames(res) res$symbol <- rownames(res)  plotMA.label(res, lab.genes = c(\"gene1\", \"gene2\")) #> Warning: log-10 transformation introduced infinite values."},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.ly.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot an interactive PCA plot ‚Äî plotPCA.ly","title":"Plot an interactive PCA plot ‚Äî plotPCA.ly","text":"Plot interactive PCA plot","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.ly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot an interactive PCA plot ‚Äî plotPCA.ly","text":"","code":"plotPCA.ly(rld, intgroup)"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.ly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot an interactive PCA plot ‚Äî plotPCA.ly","text":"rld DESeqTransform object output varianceStabilizingTransformation() rlog() intgroup character vector names colData(x) use grouping","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.ly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot an interactive PCA plot ‚Äî plotPCA.ly","text":"Handle ggplot added label field aes_string() plotting ggplotly()","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.ly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot an interactive PCA plot ‚Äî plotPCA.ly","text":"","code":"# make example dds object dds <- DESeq2::makeExampleDESeqDataSet()  # normalize rld <- DESeq2::varianceStabilizingTransformation(dds, blind=TRUE)  # make pca plot p <- plotPCA.ly(rld, intgroup='condition') #> using ntop=500 top features by variance"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.san.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjustable PCA plot ‚Äî plotPCA.san","title":"Adjustable PCA plot ‚Äî plotPCA.san","text":"Create PCA plot specified PCs x- y-axis","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.san.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjustable PCA plot ‚Äî plotPCA.san","text":"","code":"plotPCA.san(   object,   intgroup = \"group\",   pcx,   pcy,   pcz = NULL,   ntop = 500,   samples = NULL,   loadings = FALSE,   loadings_ngenes = 10 )"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.san.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjustable PCA plot ‚Äî plotPCA.san","text":"object normalized DESeqDataSet object intgroup metadata variable use grouping samples pcx principal component plot x-axis pcy principal component plot y-axis pcz principal component plot z-axis. NULL, function returns 3-D PCA plot. ntop number -variable genes use samples vector sample names show plot loadings boolean, show gene loadings? Default FALSE. loadings_ngenes integer, # genes show loadings (default=10)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.san.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjustable PCA plot ‚Äî plotPCA.san","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotPCA.san.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Adjustable PCA plot ‚Äî plotPCA.san","text":"","code":"# make example dds object dds <- DESeq2::makeExampleDESeqDataSet()  # normalize rld <- DESeq2::varianceStabilizingTransformation(dds, blind=TRUE)  # make pca plot p <- plotPCA.san(rld, intgroup='condition', pcx='PC1', pcy='PC2') #> Warning: NAs introduced by coercion #> Warning: NAs introduced by coercion"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","title":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","text":"Plot scatterplot compare two contrasts","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","text":"","code":"plotScatter.label(   compare,   df,   label_x,   label_y,   lim.x,   lim.y,   color.palette,   lab.genes = NULL,   plot_all = \"no\",   name.col = \"geneid\",   lines = c(\"yes\", \"yes\", \"yes\"),   alpha = 1,   size = 4,   show.grid = \"yes\" )"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","text":"compare string, values plot? can 'log2FoldChange' 'P-adj' df data frame log2FoldChange & padj values plot 2 contrasts label_x string, label x-axis label_y string, label y-axis lim.x x-axis limits lim.y y-axis limits color.palette character vector colors use significance categories '- LFC sign', '- opposite LFC sign', 'None', label_x, label_y lab.genes genes label (default=NULL) plot_all string, can 'yes' ''. 'yes', points outside axis limits plotted along x/y axis lines (default=''). name.col gene name column merge 2 results, also used labeling points lines 3-element character vector plot gridlines order (x=0, y=0, x=y), 'yes' '' values. E.g. ('yes', 'yes', '') plot dotted lines x = 0 & y = 0, x = y diagonal. alpha float, marker opacity (default=1). size float, marker size (default=4). show.grid string, can 'yes' (default) ''.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","text":"ggplot handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a scatterplot to compare two contrasts ‚Äî plotScatter.label","text":"","code":"library(DESeq2)  # make example dataset dds <- makeExampleDESeqDataSet()  # run DE analysis dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # extract comparisons of interest res1 <- results(dds, contrast = c(\"condition\", \"A\", \"B\")) res2 <- results(dds, contrast = c(\"condition\", \"B\", \"A\"))  # add geneid column res1 <- cbind(geneid=rownames(res1), res1) res2 <- cbind(geneid=rownames(res2), res2)  # make merged df from the two comparisons cols.sub <- c('log2FoldChange', 'padj', 'geneid') df_full <- dplyr::inner_join(   dplyr::select(as.data.frame(res1), all_of(cols.sub)),   dplyr::select(as.data.frame(res2), all_of(cols.sub)),   by = 'geneid',   suffix = c('.x', '.y') )  # calculate x & y limits for log2FoldChange xlim <- range(df_full[[ 'log2FoldChange.x' ]]) ylim <- range(df_full[[ 'log2FoldChange.y' ]])  # get color palette color.palette <- RColorBrewer::brewer.pal(n=5, name='Set2')  # add significance column sig.x <- df_full$padj.x < 0.1 & !is.na(df_full$padj.x) sig.y <- df_full$padj.y < 0.1 & !is.na(df_full$padj.y) up.x <- df_full$log2FoldChange.x >= 0 up.y <- df_full$log2FoldChange.y >= 0 significance <- rep('None', nrow(df_full)) significance[ sig.x & sig.y & ((up.x & up.y) | (!up.x & !up.y)) ] <- 'Both - same LFC sign' significance[ sig.x & sig.y & ((up.x & !up.y) | (!up.x & up.y)) ] <- 'Both - opposite LFC sign' significance[ sig.x & !sig.y ] <- 'A vs B' significance[ !sig.x & sig.y ] <- 'B vs A' df_full$significance <- significance  # generate scatter plot p <- plotScatter.label(compare = 'log2FoldChange',                        df = df_full,                        label_x = 'A vs B',                        label_y = 'B vs A',                        lim.x = xlim,                        lim.y = ylim,                        color.palette = color.palette)"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label_ly.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","title":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","text":"Plot interactive scatterplot compare two contrasts","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label_ly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","text":"","code":"plotScatter.label_ly(   compare,   df,   label_x,   label_y,   lim.x,   lim.y,   color.palette,   lab.genes = NULL,   name.col = \"geneid\",   lines = c(\"yes\", \"yes\", \"yes\"),   alpha = 1,   size = 4,   show.grid = \"yes\" )"},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label_ly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","text":"compare string, values plot? can 'log2FoldChange' 'P-adj' df data frame log2FoldChange & padj values plot 2 contrasts label_x string, label x-axis label_y string, label y-axis lim.x x-axis limits lim.y y-axis limits color.palette character vector colors use significance categories '- LFC sign', '- opposite LFC sign', 'None', label_x, label_y lab.genes genes label (default=NULL) name.col gene name column merge 2 results, also used labeling points lines 3-element character vector plot gridlines order (x=0, y=0, x=y), 'yes' '' values. E.g. ('yes', 'yes', '') plot dotted lines x = 0 & y = 0, x = y diagonal. alpha float, marker opacity (default=1). size float, marker size (default=4). show.grid string, can 'yes' (default) ''.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label_ly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","text":"plotly handle","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/plotScatter.label_ly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot an interactive scatterplot to compare two contrasts ‚Äî plotScatter.label_ly","text":"","code":"library(DESeq2)  # make example dataset dds <- makeExampleDESeqDataSet()  # run DE analysis dds <- DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # extract comparisons of interest res1 <- results(dds, contrast = c(\"condition\", \"A\", \"B\")) res2 <- results(dds, contrast = c(\"condition\", \"B\", \"A\"))  # add geneid column res1 <- cbind(geneid=rownames(res1), res1) res2 <- cbind(geneid=rownames(res2), res2)  # make merged df from the two comparisons cols.sub <- c('log2FoldChange', 'padj', 'geneid') df_full <- dplyr::inner_join(   dplyr::select(as.data.frame(res1), all_of(cols.sub)),   dplyr::select(as.data.frame(res2), all_of(cols.sub)),   by = 'geneid',   suffix = c('.x', '.y') )  # calculate x & y limits for log2FoldChange xlim <- range(df_full[[ 'log2FoldChange.x' ]]) ylim <- range(df_full[[ 'log2FoldChange.y' ]])  # get color palette color.palette <- RColorBrewer::brewer.pal(n=5, name='Set2')  # add significance column sig.x <- df_full$padj.x < 0.1 & !is.na(df_full$padj.x) sig.y <- df_full$padj.y < 0.1 & !is.na(df_full$padj.y) up.x <- df_full$log2FoldChange.x >= 0 up.y <- df_full$log2FoldChange.y >= 0 significance <- rep('None', nrow(df_full)) significance[ sig.x & sig.y & ((up.x & up.y) | (!up.x & !up.y)) ] <- 'Both - same LFC sign' significance[ sig.x & sig.y & ((up.x & !up.y) | (!up.x & up.y)) ] <- 'Both - opposite LFC sign' significance[ sig.x & !sig.y ] <- 'A vs B' significance[ !sig.x & sig.y ] <- 'B vs A' df_full$significance <- significance  # generate scatter plot p <- plotScatter.label_ly(compare = 'log2FoldChange',                           df = df_full,                           label_x = 'A vs B',                           label_y = 'B vs A',                           lim.x = xlim,                           lim.y = ylim,                           color.palette = color.palette)"},{"path":"https://nichd-bspc.github.io/carnation/reference/radarmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Radar plot module ‚Äî radarmod","title":"Radar plot module ‚Äî radarmod","text":"UI & module generate radar plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/radarmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Radar plot module ‚Äî radarmod","text":"","code":"radarUI(id, panel, type = \"\")  radarServer(id, obj, config, type = \"\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/radarmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Radar plot module ‚Äî radarmod","text":"id Module id panel string, can 'sidebar' 'main' type string, 'comp' show comparison view obj reactiveValues object containing GeneTonic object config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/radarmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Radar plot module ‚Äî radarmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/radarmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Radar plot module ‚Äî radarmod","text":"","code":"library(shiny)  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(l_gs = gt$l_gs,        anno_df = gt$anno_df,        label = 'comp1') })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(radarUI('p', 'sidebar')),            mainPanel(radarUI('p', 'main'))          ),     server = function(input, output, session){                radarServer('p', obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/read_access_yaml.html","id":null,"dir":"Reference","previous_headings":"","what":"Read access yaml with user groups and data areas ‚Äî read_access_yaml","title":"Read access yaml with user groups and data areas ‚Äî read_access_yaml","text":"function reads access yaml file returns user groups data areas list data frames.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/read_access_yaml.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read access yaml with user groups and data areas ‚Äî read_access_yaml","text":"","code":"read_access_yaml()"},{"path":"https://nichd-bspc.github.io/carnation/reference/read_access_yaml.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read access yaml with user groups and data areas ‚Äî read_access_yaml","text":"return carnation access settings yaml file","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/read_access_yaml.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read access yaml with user groups and data areas ‚Äî read_access_yaml","text":"","code":"# save access details to file home <- Sys.getenv('HOME')  # create carnation data area if it doesn't exist carnation_home <- file.path(home, 'carnation/data') if(!dir.exists(carnation_home)) dir.create(carnation_home) #> Warning: cannot create dir '/home/runner/carnation/data', reason 'No such file or directory'  create_access_yaml(user = 'admin',                    user_group = 'admin',                    data_area = carnation_home) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  al <- read_access_yaml() #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner"},{"path":"https://nichd-bspc.github.io/carnation/reference/res_cell.html","id":null,"dir":"Reference","previous_headings":"","what":"A DESeqResults object testing the difference between two cell lines of smooth muscle cells ‚Äî res_cell","title":"A DESeqResults object testing the difference between two cell lines of smooth muscle cells ‚Äî res_cell","text":"DESeqResults object testing difference two cell lines smooth muscle cells","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_cell.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A DESeqResults object testing the difference between two cell lines of smooth muscle cells ‚Äî res_cell","text":"DESeqResults object, generated DESeq2 framework","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_cell.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A DESeqResults object testing the difference between two cell lines of smooth muscle cells ‚Äî res_cell","text":"DESeqResults object data airway package created comparing two smooth muscle cell lines, accounting effect dexamethasone treatment. Details object created included create_carnation_data.R script, included scripts folder Carnation package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_cell.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"A DESeqResults object testing the difference between two cell lines of smooth muscle cells ‚Äî res_cell","text":"Himes , Jiang X, Wagner P, Hu R, Wang Q, Klanderman B, Whitaker RM, Duan Q, Lasky-Su J, Nikolos C, Jester W, Johnson M, Panettieri R Jr, Tantisira KG, Weiss ST, Lu Q. ‚ÄúRNA-Seq Transcriptome Profiling Identifies CRISPLD2 Glucocorticoid Responsive Gene Modulates Cytokine Function Airway Smooth Muscle Cells.‚Äù PLoS One. 2014 Jun 13;9(6):e99625. PMID: 24926665. GEO: GSE52778","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_dex.html","id":null,"dir":"Reference","previous_headings":"","what":"A DESeqResults object testing the effect of dexamethasone on smooth muscle cells ‚Äî res_dex","title":"A DESeqResults object testing the effect of dexamethasone on smooth muscle cells ‚Äî res_dex","text":"DESeqResults object testing effect dexamethasone smooth muscle cells","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_dex.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A DESeqResults object testing the effect of dexamethasone on smooth muscle cells ‚Äî res_dex","text":"DESeqResults object, generated DESeq2 framework","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_dex.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A DESeqResults object testing the effect of dexamethasone on smooth muscle cells ‚Äî res_dex","text":"DESeqResults object data airway package created comparing dexamethasone treated vs untreated samples, accounting different cell lines included. Details object created included create_carnation_data.R script, included scripts folder Carnation package.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/res_dex.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"A DESeqResults object testing the effect of dexamethasone on smooth muscle cells ‚Äî res_dex","text":"Himes , Jiang X, Wagner P, Hu R, Wang Q, Klanderman B, Whitaker RM, Duan Q, Lasky-Su J, Nikolos C, Jester W, Johnson M, Panettieri R Jr, Tantisira KG, Weiss ST, Lu Q. ‚ÄúRNA-Seq Transcriptome Profiling Identifies CRISPLD2 Glucocorticoid Responsive Gene Modulates Cytokine Function Airway Smooth Muscle Cells.‚Äù PLoS One. 2014 Jun 13;9(6):e99625. PMID: 24926665. GEO: GSE52778","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/run_carnation.html","id":null,"dir":"Reference","previous_headings":"","what":"Carnation ‚Äî run_carnation","title":"Carnation ‚Äî run_carnation","text":"Interactive shiny dashboard exploring RNA-Seq analysis.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/run_carnation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Carnation ‚Äî run_carnation","text":"","code":"run_carnation(credentials = NULL, passphrase = NULL, enable_admin = TRUE, ...)"},{"path":"https://nichd-bspc.github.io/carnation/reference/run_carnation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Carnation ‚Äî run_carnation","text":"credentials path encrypted sqlite db user credentials. passphrase passphrase credentials db. enable_admin TRUE, admin view shown. Note, available credentials sqlite backend. ... parameters passed shinyApp() call","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/run_carnation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Carnation ‚Äî run_carnation","text":"shinyApp object","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/run_carnation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Carnation ‚Äî run_carnation","text":"","code":"if(interactive()){     shiny::runApp(         run_carnation()     ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/save_access_yaml.html","id":null,"dir":"Reference","previous_headings":"","what":"Save access yaml to file ‚Äî save_access_yaml","title":"Save access yaml to file ‚Äî save_access_yaml","text":"function saves access details (user groups data areas) designated access yaml file.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/save_access_yaml.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save access yaml to file ‚Äî save_access_yaml","text":"","code":"save_access_yaml(lst)"},{"path":"https://nichd-bspc.github.io/carnation/reference/save_access_yaml.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save access yaml to file ‚Äî save_access_yaml","text":"lst list data frames user_groups data_areas","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/save_access_yaml.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save access yaml to file ‚Äî save_access_yaml","text":"save access settings yaml file","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/save_access_yaml.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save access yaml to file ‚Äî save_access_yaml","text":"","code":"# save access details to file home <- Sys.getenv('HOME')  # create carnation data area if it doesn't exist carnation_home <- file.path(home, 'carnation/data') if(!dir.exists(carnation_home)) dir.create(carnation_home) #> Warning: cannot create dir '/home/runner/carnation/data', reason 'No such file or directory'  create_access_yaml(user = 'admin',                    user_group = 'admin',                    data_area = carnation_home) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  # read access yaml lst <- read_access_yaml() #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  # add new user lst$user_group$admin <- c(lst$user_group$admin, 'user1')  # save to access settings save_access_yaml(lst) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner"},{"path":"https://nichd-bspc.github.io/carnation/reference/savemod.html","id":null,"dir":"Reference","previous_headings":"","what":"Save object module UI ‚Äî savemod","title":"Save object module UI ‚Äî savemod","text":"Module UI & server save carnation object.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/savemod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save object module UI ‚Äî savemod","text":"","code":"saveUI(id)  saveServer(id, original, current, coldata, pattern, username, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/savemod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save object module UI ‚Äî savemod","text":"id Module id original original carnation object current current carnation object coldata reactiveValues object containing object metadata pattern regex pattern finding carnation data username user name config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/savemod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save object module UI ‚Äî savemod","text":"UI returns actionButton Server returns reactive trigger refresh app","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/savemod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save object module UI ‚Äî savemod","text":"","code":"if (FALSE) { # interactive() library(shiny) library(DESeq2)  # default username username <- reactive({ NULL })  # internal carnation config config <- reactiveVal(get_config())  # regex to find carnation files pattern <- reactive({ config()$server$pattern })  # get example object obj <- make_example_carnation_object()  # make reactive with obj & path original <- reactiveValues( obj = obj, path = \"/path/to/carnation/obj.rds\" )  # extract metadata coldata <- reactive({ lapply(obj$dds, colData) })  # edit metadata coldata_edit <- lapply(coldata, function(x){                   x$type <- 'new'; x                 })  # add to object edit_obj <- obj for(name in names(edit_obj$dds)){   colData(edit_obj$dds[[ name ]]) <- coldata_edit[[ name ]] }  # run simple shiny app with plot shinyApp(   ui = fluidPage(          saveUI('p')        ),   server = function(input, output, session){              save_event <- saveServer('save_object',                                       original=original,                                       current=reactive({ edit_obj }),                                       coldata=coldata,                                       pattern=pattern(),                                       username=username,                                       config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/scattermod.html","id":null,"dir":"Reference","previous_headings":"","what":"Scatterplot module ‚Äî scattermod","title":"Scatterplot module ‚Äî scattermod","text":"Module UI + server generating scatter plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/scattermod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scatterplot module ‚Äî scattermod","text":"","code":"scatterPlotUI(id, panel)  scatterPlotServer(id, obj, plot_args, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/scattermod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scatterplot module ‚Äî scattermod","text":"id Module id panel string, can 'sidebar' 'main' passed UI obj reactiveValues object containing carnation object passed server plot_args reactive containing 'fdr.thres' (padj threshold), 'fc.thres' (log2FC) & 'gene..plot' (genes labeled) passed server config reactive list config settings passed server","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/scattermod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scatterplot module ‚Äî scattermod","text":"UI returns tagList scatter plot UI. Server invisibly returns NULL (used side effects).","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/scattermod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scatterplot module ‚Äî scattermod","text":"","code":"if (FALSE) { # interactive() library(shiny)  # Create reactive values to simulate app state oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  plot_args <- reactive({   list(     fdr.thres=0.1,     fc.thres=0,     gene.to.plot=c('gene1', 'gene2')   ) })  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(scatterPlotUI('p', 'sidebar')),          mainPanel(scatterPlotUI('p', 'sidebar'))        ),   server = function(input, output, session){              scatterPlotServer('p', obj, plot_args, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/settingsmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Settings module ‚Äî settingsmod","title":"Settings module ‚Äî settingsmod","text":"Module UI & server user access details interface. Server code settings module","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/settingsmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Settings module ‚Äî settingsmod","text":"","code":"settingsUI(id, panel, username)  settingsServer(id, details, depth, end_offset, assay_fun, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/settingsmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Settings module ‚Äî settingsmod","text":"id Module id panel context generating ui elements ('sidebar' 'main') username user name details reactive list user name & app location details depth project name depth end_offset project name end offset assay_fun function parse assay names file path config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/settingsmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Settings module ‚Äî settingsmod","text":"UI returns tagList module UI Server returns reactive list containing user access details","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/settingsmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Settings module ‚Äî settingsmod","text":"","code":"library(shiny)  # default username username <- reactive({ NULL })  # internal carnation config config <- reactiveVal(get_config())  # regex to find carnation files pattern <- reactive({ config()$server$pattern })  # access permissions assay.list <- reactiveValues(l=read_access_yaml()) #> Environment variable \"CARNATION_ACCESS_YAML\" not found.Using default location to save access yaml:/home/runner  if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(uiOutput('settings_sidebar')),            mainPanel(uiOutput('settings_main'))          ),     server = function(input, output, session){                output$settings_main <- renderUI({                  settingsUI('settings', panel='main', username=username)                })                 output$settings_sidebar <- renderUI({                  settingsUI('settings', panel='sidebar', username=username)                })                 settings <- settingsServer('p',                                           details=reactive({                                                     list(username=username,                                                          where=NULL)                                                   }),                                           depth=2,                                           end_offset=0,                                           assay_fun=function(x)                                             sub(paste0(pattern(), '\\\\.rds$'), '',                                                 basename(x),                                                 ignore.case=TRUE),                                           config                                           )              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/summarize.res.list.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine everything in the results list into a single table ‚Äî summarize.res.list","title":"Combine everything in the results list into a single table ‚Äî summarize.res.list","text":"Combine everything results list single table","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/summarize.res.list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine everything in the results list into a single table ‚Äî summarize.res.list","text":"","code":"summarize.res.list(   res.list,   dds.list,   dds_mapping,   alpha,   lfc.thresh,   labels = NULL )"},{"path":"https://nichd-bspc.github.io/carnation/reference/summarize.res.list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine everything in the results list into a single table ‚Äî summarize.res.list","text":"res.list Named list lists, sublist contains following names: c('res', 'dds', 'label'). \"res\" DESeqResults object, \"dds\" either indexing label dds.list object DESeq object, \"label\" nicer-looking label use. NOTE: backwards compatibility older versions lcdb-wf depends dds.list object passed. dds.list List DESeqDataSet objects whose names expected match 'dds' slots 'res.list' object dds_mapping List mapping names dds.list res.list elements alpha false-discovery rate threshold lfc.thresh log2FoldChange threshold labels list descriptions res.list elements","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/summarize.res.list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine everything in the results list into a single table ‚Äî summarize.res.list","text":"Dataframe","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/summarize.res.list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine everything in the results list into a single table ‚Äî summarize.res.list","text":"","code":"# make example DESeq data set dds <- DESeq2::makeExampleDESeqDataSet()  # run DESeq2 dds <- DESeq2::DESeq(dds) #> estimating size factors #> estimating dispersions #> gene-wise dispersion estimates #> mean-dispersion relationship #> final dispersion estimates #> fitting model and testing  # make dds list dds_list <- list(main = dds)  # make comparisons res1 <- DESeq2::results(dds, contrast=c('condition', 'A', 'B')) res2 <- DESeq2::results(dds, contrast=c('condition', 'B', 'A'))  # make list of results res_list <- list(               comp1=res1,               comp2=res2             )  # make dds mapping dds_mapping <- list(comp1='main', comp2='main')  # get summary df <- summarize.res.list(res_list, dds_list, dds_mapping, alpha=0.1, lfc.thresh=0)"},{"path":"https://nichd-bspc.github.io/carnation/reference/sumovmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary overview plot module ‚Äî sumovmod","title":"Summary overview plot module ‚Äî sumovmod","text":"UI & module generate summary overview plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/sumovmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary overview plot module ‚Äî sumovmod","text":"","code":"sumovPlotUI(id, panel, type = \"\")  sumovPlotServer(id, obj, config, type = \"\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/sumovmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary overview plot module ‚Äî sumovmod","text":"id Module id panel string, can 'sidebar' 'main' type string, 'comp' show comparison view obj reactiveValues object containing GeneTonic object config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/sumovmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary overview plot module ‚Äî sumovmod","text":"UI returns tagList plot UI server invisibly returns NULL (used side effects)","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/sumovmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary overview plot module ‚Äî sumovmod","text":"","code":"library(shiny)  # get enrichResult object data(eres_dex, package='carnation')  # convert to GeneTonic object gt <- GeneTonic::shake_enrichResult(eres_dex) #> Found 2483 gene sets in `enrichResult` object, of which 2483 are significant. #> Converting for usage in GeneTonic...  obj <- reactive({   list(l_gs = gt$l_gs,        anno_df = gt$anno_df,        label = 'comp1') })  config <- reactiveVal(get_config())  # run simple shiny app with plot if(interactive()){   shinyApp(     ui = fluidPage(            sidebarPanel(sumovPlotUI('p', 'sidebar')),            mainPanel(sumovPlotUI('p', 'main'))          ),     server = function(input, output, session){                sumovPlotServer('p', obj, config)              }   ) }"},{"path":"https://nichd-bspc.github.io/carnation/reference/top.genes.html","id":null,"dir":"Reference","previous_headings":"","what":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","title":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","text":"Get top DE genes log2FoldChange adjusted p-value","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/top.genes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","text":"","code":"top.genes(res, fdr.thres = 0.01, fc.thres = 0, n = 10, by = \"log2FoldChange\")"},{"path":"https://nichd-bspc.github.io/carnation/reference/top.genes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","text":"res data.frame DE analysis results fdr.thres FDR threshold fc.thres log2FoldChange threshold n number genes return metric determine top genes ('log2FoldChange' 'padj')","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/top.genes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","text":"vector gene symbols","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/top.genes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get top DE genes by log2FoldChange or adjusted p-value ‚Äî top.genes","text":"","code":"# get DE results data(res_dex, package='carnation')  g <- top.genes(res_dex)"},{"path":"https://nichd-bspc.github.io/carnation/reference/upsetmod.html","id":null,"dir":"Reference","previous_headings":"","what":"Upset plot module ‚Äî upsetmod","title":"Upset plot module ‚Äî upsetmod","text":"Module UI & server generate upset plots.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/upsetmod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upset plot module ‚Äî upsetmod","text":"","code":"upsetPlotUI(id, panel)  upsetPlotServer(id, obj, plot_args, gene_scratchpad, reset_genes, config)"},{"path":"https://nichd-bspc.github.io/carnation/reference/upsetmod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upset plot module ‚Äî upsetmod","text":"id Module id panel string, can 'sidebar' 'main' obj reactiveValues object containing carnation object plot_args reactive containing 'fdr.thres' (padj threshold) & 'fc.thres' (log2FC) gene_scratchpad reactiveValues object containing genes selected scratchpad reset_genes reactive reset gene scratchpad selection config reactive list config settings","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/upsetmod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upset plot module ‚Äî upsetmod","text":"UI returns tagList upset plot UI. Server returns reactive list containing upset table, intersections & selected genes.","code":""},{"path":"https://nichd-bspc.github.io/carnation/reference/upsetmod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Upset plot module ‚Äî upsetmod","text":"","code":"if (FALSE) { # interactive() library(shiny)  oobj <- make_example_carnation_object()  obj <- reactiveValues(    dds = oobj$dds,    rld = oobj$rld,    res = oobj$res,    all_dds = oobj$all_dds,    all_rld = oobj$all_rld,    dds_mapping = oobj$dds_mapping )  plot_args <- reactive({   list(     fdr.thres=0.1,     fc.thres=0   ) })  gene_scratchpad <- reactive({ c('gene1', 'gene2') })  reset_genes <- reactiveVal()  config <- reactiveVal(get_config())  shinyApp(   ui = fluidPage(          sidebarPanel(upsetPlotUI('p', 'sidebar')),          mainPanel(upsetPlotUI('p', 'sidebar'))        ),   server = function(input, output, session){              upset_data <- upsetPlotServer('p', obj, plot_args,                                            gene_scratchpad,                                            reset_genes, config)            } ) }"},{"path":"https://nichd-bspc.github.io/carnation/news/index.html","id":"carnation-0990","dir":"Changelog","previous_headings":"","what":"carnation 0.99.0","title":"carnation 0.99.0","text":"carnation submitted bioconductor review","code":""}]
